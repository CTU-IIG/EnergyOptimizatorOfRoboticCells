<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>solver: /home/bukatlib/Downloads/Solver/src/HeuristicSolver/ParallelHeuristicSolver.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">solver
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_93efc9365a6be47fd18940a722debe85.html">HeuristicSolver</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ParallelHeuristicSolver.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">        This file is part of the EnergyOptimizatorOfRoboticCells program.</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">        EnergyOptimizatorOfRoboticCells is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">        it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">        the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">        (at your option) any later version.</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">        EnergyOptimizatorOfRoboticCells is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">        but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">        GNU General Public License for more details.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">        You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">        along with EnergyOptimizatorOfRoboticCells. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;random&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;thread&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;SolverConfig.h&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="NumericConstants_8h.html">Shared/NumericConstants.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="Utils_8h.html">Shared/Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ParallelHeuristicSolver_8h.html">HeuristicSolver/ParallelHeuristicSolver.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacestd_1_1chrono.html">std::chrono</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="keyword">static</span> random_device rd;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#ac9dcf8faf21774a45ac779030626a8fd">   38</a></span>&#160;<a class="code" href="classParallelHeuristicSolver.html#ac9dcf8faf21774a45ac779030626a8fd">ParallelHeuristicSolver::ParallelHeuristicSolver</a>(<span class="keyword">const</span> <a class="code" href="classRoboticLine.html">RoboticLine</a>&amp; l, <span class="keyword">const</span> <a class="code" href="structPrecalculatedMapping.html">PrecalculatedMapping</a>&amp; m) : mLine(l), mMapping(m), algo(mKB, mLine, mMapping) {</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">mTabuListSize</a> = 0u;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        uint32_t maxStaticActivities = 0u, maxLocations = 0u;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classRobot.html">Robot</a>* r : l.robots())     {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                uint32_t numberOfStaticActivities = 0u, numberOfLocations = 0u, numberOfPowerModes = r-&gt;powerModes().size();</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="classActivity.html">Activity</a> *a : r-&gt;activities())     {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                        <a class="code" href="classStaticActivity.html">StaticActivity</a> *sa = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classStaticActivity.html">StaticActivity</a>*<span class="keyword">&gt;</span>(a);</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                        <span class="keywordflow">if</span> (sa != <span class="keyword">nullptr</span>)      {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                uint32_t numberOfActivityLocations = sa-&gt;locations().size();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                maxLocations = max(maxLocations, numberOfActivityLocations);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                numberOfLocations += numberOfActivityLocations;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                ++numberOfStaticActivities;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                        }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                }</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                maxStaticActivities = max(maxStaticActivities, numberOfStaticActivities);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">mTabuListSize</a> += numberOfLocations*numberOfPowerModes;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        }</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>.resize(<a class="code" href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a>+1, vector&lt;vector&lt;double&gt;&gt;(maxStaticActivities+1, vector&lt;double&gt;(maxLocations, F64_INF)));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#aa19f3ce573a7ed7b53d2d5f443493e74">mPreds</a>.resize(<a class="code" href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a>+1, vector&lt;vector&lt;int64_t&gt;&gt;(maxStaticActivities+1, vector&lt;int64_t&gt;(maxLocations, -1)));</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a02f45a19f59e451b6f1dfb21d339fea9">mLocs</a>.resize(<a class="code" href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a>+1, vector&lt;vector&lt;Location*&gt;&gt;(maxStaticActivities+1, vector&lt;Location*&gt;(maxLocations, <span class="keyword">nullptr</span>)));</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">mTabuListSize</a> = (uint32_t) ceil(0.1*<a class="code" href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">mTabuListSize</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a425459a8d9e46ede261734c984c3bcf4">   64</a></span>&#160;<a class="code" href="structSolution.html">Solution</a> <a class="code" href="classParallelHeuristicSolver.html#a425459a8d9e46ede261734c984c3bcf4">ParallelHeuristicSolver::solve</a>()       {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <a class="code" href="structSolution.html">Solution</a> s;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#a25f0552e58e0d45be3eeb7d86947c5ea">controlThread</a>();</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                s = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a6ae1262a95d3b401426c718288555e7e">bestSolution</a>();</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                s.<a class="code" href="structSolution.html#a21c7486cdfe34ac5f7769b3053f10a71">status</a> = FEASIBLE;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        } <span class="keywordflow">catch</span> (<a class="code" href="classNoFeasibleSolutionExists.html">NoFeasibleSolutionExists</a>&amp; e)   {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                s.<a class="code" href="structSolution.html#a21c7486cdfe34ac5f7769b3053f10a71">status</a> = INFEASIBLE;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        } <span class="keywordflow">catch</span> (<a class="code" href="classEmptySolutionPool.html">EmptySolutionPool</a>&amp; e)  {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                s.<a class="code" href="structSolution.html#a21c7486cdfe34ac5f7769b3053f10a71">status</a> = UNKNOWN;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        } <span class="keywordflow">catch</span> (...)   {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                throw_with_nested(<a class="code" href="classSolverException.html">SolverException</a>(caller(), <span class="stringliteral">&quot;Cannot get the solution, an exception occurred!&quot;</span>));</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        s.<a class="code" href="structSolution.html#a979cc1f2b8a0ff0fbdf81d700025827e">runTime</a> = <a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">return</span> s;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a25f0552e58e0d45be3eeb7d86947c5ea">   83</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#a25f0552e58e0d45be3eeb7d86947c5ea">ParallelHeuristicSolver::controlThread</a>()   {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">// Set constants and the feasible flag.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a> = 0.0;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">mFeasible</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="comment">// Start timing...</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        time_point&lt;system_clock, duration&lt;double&gt;&gt; startTime = high_resolution_clock::now();</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        time_point&lt;system_clock, duration&lt;double&gt;&gt; expectedFinishTime = startTime+duration&lt;double&gt;(<a class="code" href="namespaceSettings.html#a4cf0b535974659ddf33fa667da82f320">Settings::MAX_RUNTIME</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">// Initial phase of the heuristic.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a> precalculatedCircuits(1024);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        vector&lt;vector&lt;CircuitRecord&gt;&gt; initialCircuits = <a class="code" href="classParallelHeuristicSolver.html#a56021d5c648f710d874346e6aa1c4dc3">generateShortestCircuits</a>(precalculatedCircuits);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">mFeasible</a> == <span class="keyword">false</span>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classNoFeasibleSolutionExists.html">NoFeasibleSolutionExists</a>(caller(), <span class="stringliteral">&quot;The problem was proved to be infeasible!&quot;</span>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordtype">double</span> initializationTime = duration_cast&lt;duration&lt;double&gt;&gt;(high_resolution_clock::now()-startTime).count();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceSettings.html#a1095da8807365b55cb71a26e14f8eb08">Settings::VERBOSE</a>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                clog&lt;&lt;endl&lt;&lt;<span class="stringliteral">&quot;Initial phase: &quot;</span>&lt;&lt;initializationTime&lt;&lt;<span class="stringliteral">&quot; s&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor">        #ifdef GUROBI_SOLVER</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="SolverInterface_8h.html#a613bc503b250931f3d8268b122a87728">initializeLocalEnvironments</a>(<a class="code" href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="preprocessor">        #endif</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        vector&lt;thread&gt; threads;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">for</span> (uint32_t t = 0; t &lt; <a class="code" href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a>; ++t)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                threads.emplace_back(&amp;<a class="code" href="classParallelHeuristicSolver.html#afb59f538b3ced2d0388e82f837c05894">ParallelHeuristicSolver::workerThread</a>, <span class="keyword">this</span>, t+1, initialCircuits, precalculatedCircuits);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        duration&lt;double&gt; timeToNextWakeUp = duration&lt;double&gt;(max(<a class="code" href="namespaceSettings.html#a4cf0b535974659ddf33fa667da82f320">Settings::MAX_RUNTIME</a>/10.0, 5.0));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a> == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                duration&lt;double&gt; remainingTimeToWait = expectedFinishTime-high_resolution_clock::now();</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">if</span> (remainingTimeToWait &gt; timeToNextWakeUp)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        remainingTimeToWait = timeToNextWakeUp;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                this_thread::sleep_for(remainingTimeToWait);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a> = duration_cast&lt;duration&lt;double&gt;&gt;(high_resolution_clock::now()-startTime).count();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a> &gt; <a class="code" href="namespaceSettings.html#a4cf0b535974659ddf33fa667da82f320">Settings::MAX_RUNTIME</a>)   {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                        <a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                } <span class="keywordflow">else</span>  {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                <span class="keywordflow">if</span> (<a class="code" href="namespaceSettings.html#a1095da8807365b55cb71a26e14f8eb08">Settings::VERBOSE</a>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                        <a class="code" href="classParallelHeuristicSolver.html#a377a1376f55138ee5f1aa4f1c4200991">printProgressInfo</a>(<a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                <a class="code" href="classParallelHeuristicSolver.html#ab247b5c61bc4d777d5d1ce87718f50ed">generatePromisingTuples</a>(0u);    <span class="comment">// threadId of the control thread is 0</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                        } <span class="keywordflow">catch</span> (exception&amp; e)  {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a56fcd3b824a872da01c6b92b93889ca5">addErrorMessage</a>(e.what());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                <a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="comment">// do stuff - util wait condition is satisfied...</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">for</span> (thread&amp; th : threads)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                th.join();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="comment">// Get the final heuristic runtime.</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a> = duration_cast&lt;duration&lt;double&gt;&gt;(high_resolution_clock::now()-startTime).count();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#a718e534c49e653598892a55e53d9d91e">writePerformanceRecordToLogFile</a>(initializationTime, <a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a>);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="namespaceSettings.html#a1095da8807365b55cb71a26e14f8eb08">Settings::VERBOSE</a>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                cout&lt;&lt;<span class="stringliteral">&quot;Total time: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">mRuntime</a>&lt;&lt;<span class="stringliteral">&quot; s&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keyword">const</span> vector&lt;string&gt;&amp; msgs = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a4eab5573c3a034d6e7223b79fc253c27">errorMessages</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">if</span> (!msgs.empty())      {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                <span class="keywordtype">string</span> bigMessage = <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keywordflow">for</span> (uint32_t m = 0; m &lt; msgs.size(); ++m)      {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                        bigMessage += msgs[m];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        <span class="keywordflow">if</span> (m+1 &lt; msgs.size())</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                bigMessage += <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classSolverException.html">SolverException</a>(caller(), bigMessage);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#afb59f538b3ced2d0388e82f837c05894">  156</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#afb59f538b3ced2d0388e82f837c05894">ParallelHeuristicSolver::workerThread</a>(uint32_t threadId, vector&lt;vector&lt;CircuitRecord&gt;&gt; initialCircuits, <a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a> precalculatedCircuits)       {</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <a class="code" href="classTabuList.html">TabuList</a> tabuList(<a class="code" href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">mTabuListSize</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keyword">const</span> uint32_t numOfTuplesBatch = 50u;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <span class="keywordflow">while</span> (!<a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a>) {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        <span class="comment">/* INITIAL PHASE - FEASIBILITY PROBLEM */</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        <a class="code" href="structCircuitTuple.html">CircuitTuple</a> t;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        <a class="code" href="structPartialSolution.html">PartialSolution</a> ps;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        <a class="code" href="structOptimalTiming.html">OptimalTiming</a> timing;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                        vector&lt;vector&lt;Location*&gt;&gt; fixed;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        <a class="code" href="DataStructures_8h.html#a37b7af86392f48cd5663232e21b14b09">Algo</a> selAlgo = LP_INITIAL_PROBLEM;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                        <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                                <span class="comment">// A fresh tuple to solve.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                t = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#af48f16196e4f6465687ee49e375215e9">getTuple</a>();</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                <span class="comment">// Initialize the partial solution suitable for the LP solver.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structCircuitRecord.html">CircuitRecord</a>&amp; cr : t.<a class="code" href="structCircuitTuple.html#a6e3a0eba954d892097950b15fb5cd0f5">tuple</a>)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                                        ps.<a class="code" href="structPartialSolution.html#a50fb6d7e10ac824afeeb56724d8c7468">locs</a>.push_back(cr.<a class="code" href="structCircuitRecord.html#a6d4b145cca40b97ba37bfaf81d549c4e">hc</a>.<a class="code" href="structHamiltonianCircuit.html#af08c639cf473186aa0c0802ec9f43bc8">circuit</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                fixed = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#aa36d3769a748d8c3ded630c515e0e8ad">initializePartialSolution</a>(ps);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                <span class="comment">// Solve the LP problem to optimality with the collision resolution.</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                timing = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#abd5588eab6e5aaf559d00d8421a51009">solvePartialProblem</a>(ps, t, selAlgo);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        } <span class="keywordflow">catch</span> (<a class="code" href="classEmptySolutionPool.html">EmptySolutionPool</a>&amp; e)  {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                <a class="code" href="classParallelHeuristicSolver.html#a28ae0a0e88f07796bb67480a933f979b">addRandomTuplesToKB</a>(threadId, numOfTuplesBatch, initialCircuits, precalculatedCircuits);</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        } <span class="keywordflow">catch</span> (<a class="code" href="classNoFeasibleSolutionExists.html">NoFeasibleSolutionExists</a>&amp; e)   {</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                <span class="comment">// Try another tuple. This tuple is infeasible probably...</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        }</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <span class="comment">/* FINAL PHASE - LOCAL OPTIMIZATION OF THE PROBLEM */</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                        selAlgo = POWER_MODE_HEURISTIC;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        <a class="code" href="structPartialSolution.html">PartialSolution</a> prevPartSol = ps;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <a class="code" href="structOptimalTiming.html">OptimalTiming</a> prevOptTiming = timing;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <span class="keywordtype">bool</span> readNextTuple = <span class="keyword">false</span>, solutionChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        <span class="keyword">const</span> uint32_t lpLength = <a class="code" href="namespaceSettings.html#a528aca0aec3236176299d861eab1ccaa">Settings::MIN_ITERS_PER_TUPLE</a>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        constexpr uint32_t locHeurLength = 3, pwrmHeurLength = 5;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                        uint32_t numberOfIter = 0, infeasibilityConsecutiveCounter = 0;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        <span class="keywordtype">double</span> energyDiffEstimation = 0.0, bestCriterion = timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                        <a class="code" href="classMovingAverage.html">MovingAverage&lt;double&gt;</a> imprLocChg(locHeurLength), imprPwrmChg(pwrmHeurLength), imprLP(lpLength);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        <span class="keywordflow">do</span>      {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                <span class="keywordflow">switch</span> (selAlgo)        {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                        <span class="keywordflow">case</span> POWER_MODE_HEURISTIC:</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                                energyDiffEstimation = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#a533a4de85081bfc9bd1b545b5c228a71">heuristicPowerModeSelection</a>(timing, ps, tabuList, solutionChanged);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                        <span class="keywordflow">case</span> LOCATION_CHANGE_HEURISTIC:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                                                energyDiffEstimation = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#a8ff0d590aa5f78e010fbfee385275e78">heuristicLocationChanges</a>(timing, ps, fixed, solutionChanged);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                        <span class="keywordflow">case</span> PATH_CHANGE:</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                <a class="code" href="classParallelHeuristicSolver.html#a26dba51d1509305ce3cf966176b88d44">changeRobotPaths</a>(threadId, t, ps, fixed);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                                fixed = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#aa36d3769a748d8c3ded630c515e0e8ad">initializePartialSolution</a>(ps);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                                imprLocChg.clear(); imprPwrmChg.clear();</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                <span class="keywordtype">bool</span> solutionInfeasible = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                <span class="keywordtype">double</span> relativeImprovement = 0.0, heurRelEstError = 0.0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                        <span class="keywordtype">double</span> previousCriterion = timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                        timing = <a class="code" href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">algo</a>.<a class="code" href="classHeuristicAlgorithms.html#abd5588eab6e5aaf559d00d8421a51009">solvePartialProblem</a>(ps, t, selAlgo);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                        bestCriterion = min(bestCriterion, timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                        <span class="keywordtype">double</span> energyDiffExact = previousCriterion-timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                        relativeImprovement = max(bestCriterion-timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>, 0.0)/(timing.<a class="code" href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">totalEnergy</a>+F64_EPS);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                        prevPartSol = ps; prevOptTiming = timing;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                        imprLP.<a class="code" href="classMovingAverage.html#af2a862523aa8e9d902186fc9cc72a2cc">addValue</a>(relativeImprovement);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                        <span class="keywordflow">if</span> (abs(energyDiffExact) &gt; F64_EPS)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                                heurRelEstError = abs(energyDiffEstimation-energyDiffExact)/abs(energyDiffExact);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                                        infeasibilityConsecutiveCounter = 0u;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                        readNextTuple = (imprLP.<a class="code" href="classMovingAverage.html#a814915646f232a80093e40a35549c1a4">filled</a>() &amp;&amp; imprLP.<a class="code" href="classMovingAverage.html#ab939f36282ecc64017eaccf19a01f7b0">average</a>() &lt; <a class="code" href="NumericConstants_8h.html#a6d68bd0697184d300542836f151a6f17">CRITERION_RTOL</a>);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                                } <span class="keywordflow">catch</span> (<a class="code" href="classNoFeasibleSolutionExists.html">NoFeasibleSolutionExists</a>&amp; e)   {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                                        <span class="comment">// The solution was made infeasible by heuristic changes, restore the previous solution and switch to the next heuristic.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                                        solutionInfeasible = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                        ps = prevPartSol; timing = prevOptTiming;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                        <span class="keywordflow">if</span> (infeasibilityConsecutiveCounter &gt;= 4)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                                readNextTuple = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                                        ++infeasibilityConsecutiveCounter;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                                <span class="keywordflow">switch</span> (selAlgo)        {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                                        <span class="keywordflow">case</span> POWER_MODE_HEURISTIC:</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                                <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a991db5017e69d25756871b761d20c7a1">recordPwrmHeurRelErr</a>(heurRelEstError);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                                                imprPwrmChg.addValue(relativeImprovement);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                                                <span class="keywordflow">if</span> ((imprPwrmChg.filled() &amp;&amp; imprPwrmChg.average() &lt; <a class="code" href="NumericConstants_8h.html#a6d68bd0697184d300542836f151a6f17">CRITERION_RTOL</a>) || !solutionChanged || solutionInfeasible)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                                        selAlgo = LOCATION_CHANGE_HEURISTIC;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                                        <span class="keywordflow">case</span> LOCATION_CHANGE_HEURISTIC:</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                                <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#ac18f9b3516750006bda87b0a52bb7ed4">recordLocHeurRelErr</a>(heurRelEstError);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                                imprLocChg.addValue(relativeImprovement);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                                <span class="keywordflow">if</span> ((imprLocChg.filled() &amp;&amp; imprLocChg.average() &lt; <a class="code" href="NumericConstants_8h.html#a6d68bd0697184d300542836f151a6f17">CRITERION_RTOL</a>) || !solutionChanged || solutionInfeasible)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                                        selAlgo = PATH_CHANGE;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                        <span class="keywordflow">case</span> PATH_CHANGE:</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                selAlgo = POWER_MODE_HEURISTIC;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                                }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                                ++numberOfIter;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        } <span class="keywordflow">while</span> (!readNextTuple &amp;&amp; !<a class="code" href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">mStopCondition</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a1e5b5c5cecd3731a7771c83a31eb4d09">recordNumberOfItersPerTuple</a>(numberOfIter);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        } <span class="keywordflow">catch</span> (exception&amp; e)  {</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a56fcd3b824a872da01c6b92b93889ca5">addErrorMessage</a>(<a class="code" href="Exceptions_8h.html#ac47753955681ccd5663d290bbf1ab688">exceptionToString</a>(e, 1));</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a8a03d5b53452d8439c67daeb31e05fb1">  267</a></span>&#160;<a class="code" href="structGraph.html">Graph</a> <a class="code" href="classParallelHeuristicSolver.html#a8a03d5b53452d8439c67daeb31e05fb1">ParallelHeuristicSolver::constructMinimalDurationGraph</a>(<a class="code" href="classRobot.html">Robot</a>* r)<span class="keyword"> const </span>{</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        uint32_t <span class="keywordtype">id</span> = 0;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        vector&lt;StaticActivity*&gt; idToActivity;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        map&lt;StaticActivity*, uint32_t&gt; ident;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        <a class="code" href="classStaticActivity.html">StaticActivity</a> *home = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classActivity.html">Activity</a>* a : r-&gt;activities())     {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                <a class="code" href="classStaticActivity.html">StaticActivity</a> *sa = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classStaticActivity.html">StaticActivity</a>*<span class="keyword">&gt;</span>(a);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="keywordflow">if</span> (sa != <span class="keyword">nullptr</span>)      {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        setValue(ident, sa, <span class="keywordtype">id</span>++, caller());</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                        idToActivity.push_back(sa);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                        <span class="keywordflow">if</span> (sa-&gt;lastInCycle())</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                home = sa;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                }</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        assert(home != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Invalid checking of the correctness of instances!&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        uint32_t startId = <span class="keywordtype">id</span>++, endId = getValue(ident, home, caller());</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        idToActivity.push_back(home);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        vector&lt;Edge&gt; graphEdges;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classActivity.html">Activity</a> *s : home-&gt;successors())  {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                <a class="code" href="classDynamicActivity.html">DynamicActivity</a> *da = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classDynamicActivity.html">DynamicActivity</a>*<span class="keyword">&gt;</span>(s);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                assert(da != <span class="keyword">nullptr</span> &amp;&amp; <span class="stringliteral">&quot;Logic error, the successor of the static activity must be a dynamic activity!&quot;</span>);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">if</span> (da != <span class="keyword">nullptr</span>)      {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        <a class="code" href="classStaticActivity.html">StaticActivity</a> *to = da-&gt;successor();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                        graphEdges.push_back({home, to, startId, getValue(ident, to, caller()), home-&gt;minAbsDuration()+da-&gt;minAbsDuration()});</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classActivity.html">Activity</a>* a : r-&gt;activities())     {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <a class="code" href="classDynamicActivity.html">DynamicActivity</a> *da = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classDynamicActivity.html">DynamicActivity</a>*<span class="keyword">&gt;</span>(a);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="keywordflow">if</span> (da != <span class="keyword">nullptr</span> &amp;&amp; da-&gt;predecessor() != home) {</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                        <a class="code" href="classStaticActivity.html">StaticActivity</a> *from = da-&gt;predecessor(), *to = da-&gt;successor();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                        graphEdges.push_back({from, to, getValue(ident, from, caller()), getValue(ident, to, caller()), from-&gt;minAbsDuration()+da-&gt;minAbsDuration()});</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        }</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        vector&lt;vector&lt;Edge&gt;&gt; idToSucs(idToActivity.size());</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structEdge.html">Edge</a>&amp; e : graphEdges)        {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                assert(e.i &lt; idToActivity.size() &amp;&amp; <span class="stringliteral">&quot;Invalid generation of identifications!&quot;</span>);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                idToSucs[e.i].push_back(e);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="keywordflow">return</span> {graphEdges, startId, endId, idToActivity, idToSucs};</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a6089f6ae29acb565dbff981ebbaaa483">  316</a></span>&#160;<a class="code" href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix&lt;double&gt;</a> <a class="code" href="classParallelHeuristicSolver.html#a6089f6ae29acb565dbff981ebbaaa483">ParallelHeuristicSolver::createInitialDistanceMatrix</a>(<span class="keyword">const</span> <a class="code" href="structGraph.html">Graph</a>&amp; g)<span class="keyword"> const       </span>{</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordtype">size_t</span> matrixSize = g.<a class="code" href="structGraph.html#aa8bc6eefadb5987750be3901ea7d87c3">idToActivity</a>.size();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix&lt;double&gt;</a> mat(matrixSize, vector&lt;double&gt;(matrixSize, F64_INF));</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structEdge.html">Edge</a>&amp; e : g.<a class="code" href="structGraph.html#a28d19ea9c7d111f55fee78331abe88bd">edges</a>)   {</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                assert(e.<a class="code" href="structEdge.html#a0ad7bbadf63ad9a748c35b6034c5b916">i</a> &lt; matrixSize &amp;&amp; e.<a class="code" href="structEdge.html#aca4e5b9eb1b0c9a0c2feafd760a0a3fe">j</a> &lt; matrixSize &amp;&amp; <span class="stringliteral">&quot;Invalid creation of the graph!&quot;</span>);</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                mat[e.<a class="code" href="structEdge.html#a0ad7bbadf63ad9a748c35b6034c5b916">i</a>][e.<a class="code" href="structEdge.html#aca4e5b9eb1b0c9a0c2feafd760a0a3fe">j</a>] = e.<a class="code" href="structEdge.html#ae3ea80ea41b7a8072d456af9110dc6d5">length</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; matrixSize; ++i)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                mat[i][i] = 0.0;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">return</span> mat;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#afa9311b7a30ceed77e990c89f7d51372">  330</a></span>&#160;vector&lt;CircuitRecord&gt; <a class="code" href="classParallelHeuristicSolver.html#afa9311b7a30ceed77e990c89f7d51372">ParallelHeuristicSolver::generateRandomAlternatives</a>(<span class="keyword">const</span> uint32_t&amp; threadId, <span class="keyword">const</span> <a class="code" href="structGraph.html">Graph</a>&amp; g, <span class="keyword">const</span> <a class="code" href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix&lt;double&gt;</a>&amp; m) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordtype">bool</span> allFound = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        set&lt;vector&lt;uint32_t&gt;&gt; forbiddenPaths;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        default_random_engine threadGenerator(rd());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        vector&lt;CircuitRecord&gt; shortestAlternatives;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="classStaticActivity.html">StaticActivity</a> *home = g.<a class="code" href="structGraph.html#aa8bc6eefadb5987750be3901ea7d87c3">idToActivity</a>[g.<a class="code" href="structGraph.html#a2bafb08a3455904d2ae66dee4fe01931">startIdent</a>];</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keyword">const</span> uint32_t maxCircuits = <a class="code" href="namespaceSettings.html#a0fcda7e67e18bde0be384464eeeeda95">Settings::MAX_ALTERNATIVES</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        uint64_t numOfNodes = g.<a class="code" href="structGraph.html#a6751fc8b27562b933f059c518a5cb2ac">idToSuccessors</a>.size(), numOfSol = 0;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">while</span> (allFound != <span class="keyword">true</span> &amp;&amp; numOfSol &lt; maxCircuits &amp;&amp; <a class="code" href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">mFeasible</a>) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                set&lt;uint32_t&gt; visited;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                vector&lt;double&gt; edgeDistances;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                uint32_t currentNode = g.<a class="code" href="structGraph.html#a2bafb08a3455904d2ae66dee4fe01931">startIdent</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                vector&lt;StaticActivity*&gt; path = { home };</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                vector&lt;uint32_t&gt; nodePath = { currentNode };</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <span class="keywordflow">while</span> ((currentNode != g.<a class="code" href="structGraph.html#a3cd4b67afadf044092996b917d3d8043">endIdent</a> || nodePath.size() != numOfNodes) &amp;&amp; allFound == <span class="keyword">false</span>)       {</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <span class="keywordtype">bool</span> backtrack = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        <span class="comment">// Calculate the current length of the partial path.</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        <span class="keywordtype">double</span> pathLength = accumulate(edgeDistances.cbegin(), edgeDistances.cend(), 0.0);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                        <span class="comment">// Check the reachability from currentNode to unvisited nodes.</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                        <span class="keywordflow">for</span> (uint32_t n = 0; n &lt; numOfNodes &amp;&amp; !backtrack; ++n) {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                <span class="keywordflow">if</span> (visited.count(n) == 0 &amp;&amp; pathLength+m[currentNode][n]+m[n][g.<a class="code" href="structGraph.html#a3cd4b67afadf044092996b917d3d8043">endIdent</a>] &gt; cycleTime)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                                        backtrack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                        <span class="keywordflow">if</span> (backtrack == <span class="keyword">false</span>) {</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                                <span class="comment">// Find eligible edges from the current node to successor nodes.</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                                vector&lt;Edge&gt; feasEdges;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                                <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="structEdge.html">Edge</a>&amp; e : g.<a class="code" href="structGraph.html#a6751fc8b27562b933f059c518a5cb2ac">idToSuccessors</a>[currentNode])     {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                        nodePath.push_back(e.j);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                        <span class="keywordflow">if</span> (visited.count(e.j) == 0 &amp;&amp; forbiddenPaths.count(nodePath) == 0)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                                                feasEdges.push_back(e);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                                        nodePath.pop_back();</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                                }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                                <span class="keywordflow">if</span> (!feasEdges.empty()) {</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                                        <span class="comment">// It selects a random edge to move.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                        uniform_int_distribution&lt;uint32_t&gt; edgeSelection(0, feasEdges.size()-1);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                        <span class="keyword">const</span> <a class="code" href="structEdge.html">Edge</a>&amp; edge = feasEdges[edgeSelection(threadGenerator)];</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                        path.push_back(edge.t); nodePath.push_back(edge.j);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                        edgeDistances.push_back(edge.length);</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                                        visited.insert(edge.i); currentNode = edge.j;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                        <span class="comment">// Cannot expand the node -&gt; backtrack.</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                        backtrack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                        }</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                        <span class="comment">// Backtracking - add a new forbidden path and remove the last node.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                        <span class="keywordflow">if</span> (backtrack == <span class="keyword">true</span>)  {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                assert(path.size() == nodePath.size() &amp;&amp; <span class="stringliteral">&quot;Expected the same size! A bug in the algorithm.&quot;</span>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                <span class="keywordflow">if</span> (nodePath.size() &gt;= 2)       {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                        <span class="keyword">const</span> vector&lt;uint32_t&gt;&amp; prefixPath = nodePath;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                        <span class="keyword">auto</span> p = forbiddenPaths.emplace(nodePath.cbegin(), nodePath.cend());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                                        set&lt;vector&lt;uint32_t&gt;&gt;::iterator it = p.first, eraseStart = ++it, eraseStop = eraseStart;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                        <span class="keywordflow">while</span> (it != forbiddenPaths.end())      {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                                                <span class="keyword">const</span> vector&lt;uint32_t&gt;&amp; nextPath = *it;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                                <span class="keywordflow">if</span> (prefixPath.size() &lt; nextPath.size())        {</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                                        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mitp = mismatch(prefixPath.cbegin(), prefixPath.cend(), nextPath.cbegin());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                                        <span class="keywordflow">if</span> (mitp.first == prefixPath.end())</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                                                eraseStop = ++it;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                                }</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                        }</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                        forbiddenPaths.erase(eraseStart, eraseStop);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                                        visited.erase(nodePath.back());</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                        path.pop_back(); nodePath.pop_back(); edgeDistances.pop_back();</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                        currentNode = nodePath.back();</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                        <span class="comment">// All hamiltonian paths found...</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                        allFound = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                }</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="comment">// Save the found hamiltonian path...</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">if</span> (currentNode == g.<a class="code" href="structGraph.html#a3cd4b67afadf044092996b917d3d8043">endIdent</a>)  {</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                        <a class="code" href="structHamiltonianCircuit.html">HamiltonianCircuit&lt;Location&gt;</a> cl = <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">getShortestCircuit</a>(threadId, path, {});       <span class="comment">// closed path - penalty free</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                        <span class="keywordflow">if</span> (cl.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a> &gt;= 0.0 &amp;&amp; cl.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a> &lt;= cycleTime)   {</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                <a class="code" href="structShortestCircuit.html">ShortestCircuit</a> sc;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                sc.<a class="code" href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">circuit</a> = move(path);</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                shortestAlternatives.emplace_back(move(sc), move(cl));</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                ++numOfSol;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                        }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                        forbiddenPaths.insert(nodePath);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        }</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">return</span> shortestAlternatives;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">  434</a></span>&#160;<a class="code" href="structHamiltonianCircuit.html">HamiltonianCircuit&lt;Location&gt;</a> <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">ParallelHeuristicSolver::getShortestCircuit</a>(<span class="keyword">const</span> uint32_t&amp; threadId, <span class="keyword">const</span> vector&lt;StaticActivity*&gt;&amp; circuit, <span class="keyword">const</span> vector&lt;Location*&gt;&amp; fixed, <span class="keywordtype">bool</span> writeCircuit) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordtype">double</span> bestDist = F64_INF;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        vector&lt;vector&lt;int64_t&gt;&gt; bestPreds;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        vector&lt;vector&lt;Location*&gt;&gt; bestLocs;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        uint32_t closedPathSize = circuit.size();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> penaltyForViolation = cycleTime+1.0;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        assert(circuit.size() &gt;= 2 &amp;&amp; <span class="stringliteral">&quot;Unexpected empty path! Invalid algorithm!&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        vector&lt;StaticActivity*&gt;::const_iterator bestStartIter = min_element(circuit.cbegin(), circuit.cend(),</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        [](<a class="code" href="classStaticActivity.html">StaticActivity</a>* sa1, <a class="code" href="classStaticActivity.html">StaticActivity</a>* sa2) {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                                <span class="keywordflow">return</span> sa1-&gt;locations().size() &lt; sa2-&gt;locations().size();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                        }</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        );</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        vector&lt;StaticActivity*&gt; closedPath;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        closedPath.reserve(closedPathSize);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="classStaticActivity.html">StaticActivity</a> *startAndEndAct = *bestStartIter;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="keywordflow">if</span> (startAndEndAct != circuit.front())  {</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                closedPath.insert(closedPath.end(), bestStartIter, circuit.cend());</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                closedPath.insert(closedPath.end(), circuit.cbegin()+1, bestStartIter+1);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                closedPath.insert(closedPath.end(), circuit.cbegin(), circuit.cend());</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        assert(closedPath.size() == circuit.size() &amp;&amp; <span class="stringliteral">&quot;Invalid rotation of the circuit, a bug in the algorithm!&quot;</span>);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="classLocation.html">Location</a>* startAndEnd : startAndEndAct-&gt;locations())       {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][0][0] = 0.0;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#aa19f3ce573a7ed7b53d2d5f443493e74">mPreds</a>[threadId][0][0] = -1;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#a02f45a19f59e451b6f1dfb21d339fea9">mLocs</a>[threadId][0][0] = startAndEnd;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">for</span> (uint32_t i = 0; i+1 &lt; closedPathSize; ++i) {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                        uint32_t fromSize = 1u, toSize = 1u;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                        <a class="code" href="classLocation.html">Location</a> **from = &amp;startAndEnd, **to = &amp;startAndEnd;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                        <span class="keywordtype">double</span> staticActDur = closedPath[i]-&gt;minAbsDuration();</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                        <span class="keywordflow">if</span> (i &gt; 0)      {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                                fromSize = closedPath[i]-&gt;mLocations.size();</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                from = closedPath[i]-&gt;mLocations.data();</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                        }</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                        <span class="keywordflow">if</span> (i+2 &lt; closedPathSize)       {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                toSize = closedPath[i+1]-&gt;mLocations.size();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                                to = closedPath[i+1]-&gt;mLocations.data();</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                        pair&lt;Location*, Location*&gt; edge;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                        fill(<a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][i+1].begin(), <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][i+1].begin()+toSize, F64_INF);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                        <span class="keywordflow">for</span> (uint32_t f = 0; f &lt; fromSize; ++f) {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                edge.first = from[f];</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                <span class="keywordtype">double</span> distance = <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][i][f]+staticActDur;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; sit = find_if(fixed.cbegin(), fixed.cend(), [&amp;](<a class="code" href="classLocation.html">Location</a> *l) { <span class="keywordflow">return</span> l-&gt;parent() == edge.first-&gt;parent(); });</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                <span class="keywordflow">if</span> (sit != fixed.cend() &amp;&amp; *sit != edge.first)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                        distance += penaltyForViolation;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                <span class="keywordflow">for</span> (uint32_t t = 0; t &lt; toSize; ++t)   {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                        edge.second = to[t];</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                                        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; mit = <a class="code" href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">mMapping</a>.<a class="code" href="structPrecalculatedMapping.html#afaaf2a6db781d7e190e5da26a6fb2f20">locationsToMovement</a>.find(edge);</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                                        <span class="keywordflow">if</span> (mit != <a class="code" href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">mMapping</a>.<a class="code" href="structPrecalculatedMapping.html#afaaf2a6db781d7e190e5da26a6fb2f20">locationsToMovement</a>.cend()) {</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                                                <a class="code" href="classMovement.html">Movement</a> *mv = mit-&gt;second;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                                                <span class="keywordtype">double</span> newDist = distance+mv-&gt;minDuration();</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                                                <span class="keywordflow">if</span> (newDist &lt; <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][i+1][t])  {</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                                                        <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][i+1][t] = newDist;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                                                        <a class="code" href="classParallelHeuristicSolver.html#a02f45a19f59e451b6f1dfb21d339fea9">mLocs</a>[threadId][i+1][t] = to[t];</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                                                        <span class="keywordflow">if</span> (writeCircuit == <span class="keyword">true</span>)</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                                                                <a class="code" href="classParallelHeuristicSolver.html#aa19f3ce573a7ed7b53d2d5f443493e74">mPreds</a>[threadId][i+1][t] = f;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                                }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                                        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                                }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                }</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordtype">double</span> circuitLength = <a class="code" href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">mDist</a>[threadId][closedPathSize-1][0];</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                <span class="keywordflow">if</span> (circuitLength &lt; bestDist)   {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        bestDist = circuitLength;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                        <span class="keywordflow">if</span> (writeCircuit == <span class="keyword">true</span>)       {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                bestPreds = <a class="code" href="classParallelHeuristicSolver.html#aa19f3ce573a7ed7b53d2d5f443493e74">mPreds</a>[threadId];</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                                bestLocs = <a class="code" href="classParallelHeuristicSolver.html#a02f45a19f59e451b6f1dfb21d339fea9">mLocs</a>[threadId];</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="structHamiltonianCircuit.html">HamiltonianCircuit&lt;Location&gt;</a> shortestCircuit;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        shortestCircuit.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a> = bestDist;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">if</span> (writeCircuit == <span class="keyword">true</span> &amp;&amp; bestDist &lt; F64_INF) {</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="comment">// The shortest circuit found...</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                vector&lt;Location*&gt; locs;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                int64_t currentPred = 0;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                locs.reserve(closedPathSize);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <span class="keywordflow">for</span> (int64_t i = closedPathSize-1; i &gt;= 0; --i) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                        locs.push_back(bestLocs[i][currentPred]);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                        currentPred = bestPreds[i][currentPred];</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        assert((currentPred != -1 || i == 0) &amp;&amp; <span class="stringliteral">&quot;Cannot reconstruct the path! A bug in the algorithm!&quot;</span>);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                assert(locs.size() == closedPathSize &amp;&amp; <span class="stringliteral">&quot;Invalid reconstruction of the path! Please report a bug.&quot;</span>);</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                reverse(locs.begin(), locs.end());</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                shortestCircuit.<a class="code" href="structHamiltonianCircuit.html#af08c639cf473186aa0c0802ec9f43bc8">circuit</a> = move(locs);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        }</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="comment">// It can return a potentially infeasible solution, i.e. a solution with the cycle time greater than the production cycle time.</span></div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <span class="keywordflow">return</span> shortestCircuit;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div>
<div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a56021d5c648f710d874346e6aa1c4dc3">  545</a></span>&#160;vector&lt;vector&lt;CircuitRecord&gt;&gt; <a class="code" href="classParallelHeuristicSolver.html#a56021d5c648f710d874346e6aa1c4dc3">ParallelHeuristicSolver::generateShortestCircuits</a>(<a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a>&amp; precalculatedCircuits) {</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <span class="keyword">const</span> vector&lt;Robot*&gt;&amp; robots = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.robots();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        uint32_t numberOfRobots = robots.size();</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        constexpr <span class="keywordtype">double</span> tuplesPer1000s = 1000000.0;    <span class="comment">// 1 ms per tuple processing</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keyword">const</span> uint32_t maxAlternativesPerRobot = 4*ceil(pow(tuplesPer1000s, 1.0/numberOfRobots));</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        vector&lt;vector&lt;CircuitRecord&gt;&gt; shortestCircuits(numberOfRobots);</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        uint32_t <span class="keywordtype">id</span> = 1u;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="preprocessor">        #pragma omp parallel num_threads(Settings::NUMBER_OF_THREADS)</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        {</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                uint32_t threadId;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="preprocessor">                #pragma omp critical</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                threadId = <span class="keywordtype">id</span>++;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="preprocessor">                #pragma omp for schedule(dynamic)</span></div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; numberOfRobots; ++r)   {</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                        <a class="code" href="structGraph.html">Graph</a> robotGraph = <a class="code" href="classParallelHeuristicSolver.html#a8a03d5b53452d8439c67daeb31e05fb1">constructMinimalDurationGraph</a>(robots[r]);</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                        <a class="code" href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix&lt;double&gt;</a> initialMatrix = <a class="code" href="classParallelHeuristicSolver.html#a6089f6ae29acb565dbff981ebbaaa483">createInitialDistanceMatrix</a>(robotGraph);</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                        <a class="code" href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix&lt;double&gt;</a> minDistMatrix = <a class="code" href="Algorithms_8h.html#a25b1baf9140955bb9b9da3820519d14b">floyd</a>(initialMatrix);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                        vector&lt;CircuitRecord&gt; allCircuits = <a class="code" href="classParallelHeuristicSolver.html#afa9311b7a30ceed77e990c89f7d51372">generateRandomAlternatives</a>(threadId, robotGraph, minDistMatrix);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                        <span class="comment">// From the potentially fastest robot cycles to the slowest ones.</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                        sort(allCircuits.begin(), allCircuits.end());</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                        <span class="comment">// Select the suitable subset of alternatives.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                        <span class="keywordflow">if</span> (!allCircuits.empty())       {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                                shortestCircuits[r].reserve(maxAlternativesPerRobot+2);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                                <span class="keywordflow">if</span> (allCircuits.size() &gt; maxAlternativesPerRobot+2)     {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                                        <span class="comment">// select shortest alternatives</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                        <span class="keywordtype">double</span> minCycleTime = allCircuits.front().hc.minLength;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                                        <span class="keywordtype">double</span> shortestAmount = 0.2+0.6*(<a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(minCycleTime, cycleTime)/10.0);</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                                        uint32_t numOfShortest = ceil(maxAlternativesPerRobot*shortestAmount);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                        shortestCircuits[r].insert(shortestCircuits[r].end(), allCircuits.cbegin(), allCircuits.cbegin()+numOfShortest);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                                        <span class="comment">// select random alternatives</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                        default_random_engine threadGenerator(rd());</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                        uint32_t numOfRandom = ceil((1.0-shortestAmount)*maxAlternativesPerRobot);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                        shuffle(allCircuits.begin()+numOfShortest, allCircuits.end(), threadGenerator);</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                                        shortestCircuits[r].insert(shortestCircuits[r].end(), allCircuits.begin()+numOfShortest, allCircuits.begin()+numOfShortest+numOfRandom);</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                        <span class="comment">// keep it sorted</span></div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                        sort(shortestCircuits[r].begin(), shortestCircuits[r].end());</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                        <span class="comment">// all alternatives are added</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                                        shortestCircuits[r] = allCircuits;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                }</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                <a class="code" href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">mFeasible</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                        <span class="keywordflow">for</span> (<a class="code" href="structCircuitRecord.html">CircuitRecord</a>&amp; cr : shortestCircuits[r])   {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                cr.hc = <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">getShortestCircuit</a>(threadId, cr.sc.circuit, {});</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                                vector&lt;Location*&gt; fixed;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                                <span class="keywordflow">for</span> (uint32_t l = 0; l+1 &lt; cr.hc.circuit.size(); ++l)   {</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                                        <a class="code" href="classLocation.html">Location</a> *loc = cr.hc.circuit[l];</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                                        <span class="keywordflow">if</span> (<a class="code" href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">mMapping</a>.<a class="code" href="structPrecalculatedMapping.html#a91f9afd9f5400e27ff5048ca640f23f7">sptComp</a>.count(loc-&gt;parent()) &gt; 0)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                                                fixed.push_back(loc);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                                cr.sc.fixedLocations = move(fixed);</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="preprocessor">                                #pragma omp critical</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                                precalculatedCircuits.emplace(cr.sc, cr.hc);</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                }</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">mFeasible</a>)  {</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">mSortedSptCmp</a> = <a class="code" href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">mMapping</a>.<a class="code" href="structPrecalculatedMapping.html#a3f1b0a4c3afee92793910a820a5e2b44">sptCompVec</a>;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                sort(<a class="code" href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">mSortedSptCmp</a>.begin(), <a class="code" href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">mSortedSptCmp</a>.end(),</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                [&amp;](<span class="keyword">const</span> <a class="code" href="PrecalculatedMapping_8h.html#aa148843f696e26adf64646f3db4ae3fe">SpatialCmpTuple</a>&amp; t1, <span class="keyword">const</span> <a class="code" href="PrecalculatedMapping_8h.html#aa148843f696e26adf64646f3db4ae3fe">SpatialCmpTuple</a>&amp; t2)       {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                        uint32_t r11 = get&lt;0&gt;(t1), r12 = get&lt;1&gt;(t1);</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                        uint32_t r21 = get&lt;0&gt;(t2), r22 = get&lt;1&gt;(t2);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                        <span class="keywordtype">double</span> ct11 = shortestCircuits[r11].front().hc.minLength, ct12 = shortestCircuits[r12].front().hc.minLength;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                        <span class="keywordtype">double</span> ct21 = shortestCircuits[r21].front().hc.minLength, ct22 = shortestCircuits[r22].front().hc.minLength;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                        <span class="keywordtype">double</span> penalty1 = <a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(ct11, cycleTime)+<a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(ct12, cycleTime);</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                        <span class="keywordtype">double</span> penalty2 = <a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(ct21, cycleTime)+<a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(ct22, cycleTime);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                        <span class="keywordflow">return</span> penalty1 &gt; penalty2;     <span class="comment">// First the tuples with the highest penalty.</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                }</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    );</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        }</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keywordflow">return</span> shortestCircuits;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;}</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">  629</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">ParallelHeuristicSolver::penaltyFunction</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; minCycle, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; demandedCycleTime)        {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keywordtype">double</span> penalty;</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <span class="comment">// Penalization function: f(x) = k1/(k2-x) if 0 &lt;= x &lt;= 1 where &#39;x&#39; is the normalized cycle time</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        constexpr <span class="keywordtype">double</span> k1 = 10.0/99.0, k2 = 100.0/99.0; <span class="comment">// f(0) = 0.1, f(1) = 10.0, 0.1 &lt;= f(x) &lt;= 10.0</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        <span class="keywordflow">if</span> (minCycle &lt;= demandedCycleTime)</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                penalty = k1/(k2-(minCycle/demandedCycleTime));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                penalty = 30.0; <span class="comment">// Extra penalty for guaranteed infeasibility, indication value.</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keywordflow">return</span> penalty;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#ae7c18787afc1e1c32b6e5d64f17cd666">  641</a></span>&#160;uint32_t <a class="code" href="classParallelHeuristicSolver.html#ae7c18787afc1e1c32b6e5d64f17cd666">ParallelHeuristicSolver::selectAlternative</a>(<span class="keyword">const</span> vector&lt;CircuitRecord&gt;&amp; alternatives)<span class="keyword"> const    </span>{</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="keywordflow">if</span> (alternatives.empty())</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classInvalidArgument.html">InvalidArgument</a>(caller(), <span class="stringliteral">&quot;No alternatives to select!&quot;</span>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        default_random_engine threadGenerator(rd());</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;        uint32_t selIdx = 0, numberOfAlternatives = alternatives.size();</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        <span class="keyword">const</span> <a class="code" href="structHamiltonianCircuit.html">HamiltonianCircuit&lt;Location&gt;</a>&amp; ha = alternatives.front().hc, &amp; hb = alternatives.back().hc;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">double</span> a = ha.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a>/cycleTime, b = hb.minLength/cycleTime, minDiff = <a class="code" href="NumericConstants_8h.html#a3ebebeda85a70b80e3aaa937ed8fb7a3">TIME_TOL</a>/cycleTime;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="keywordflow">if</span> (b-a &gt;= minDiff)     {</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="comment">// scaled distribution function (t in &lt;0,1&gt;): y(t) = n*(2-k*e^{l*t})</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                constexpr <span class="keywordtype">double</span> l = 2.0;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> k = 2.0/exp(l);</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> sa = 2*a-(k/l)*exp(l*a);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> sb = 2*b-(k/l)*exp(l*b);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> n = 1/(sb-sa);     <span class="comment">// integrate_{a}^{b} y(t) dt = 1</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="comment">// ,,Wheel of fortune&quot; - select the area &#39;s&#39;, i.e. &#39;s&#39; = integrate_{a}^{x} y(t) dt.</span></div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                uniform_real_distribution&lt;double&gt; area(0.0, 1.0);</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> s = area(threadGenerator);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="comment">/*</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">                 * Solve previously mentioned &#39;x&#39; by the Newton method.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;<span class="comment">                 * Equation to solve: c = 2*x-(k/l)*e^{l*x}</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="comment">                 * Update formula: x_{i+1} = x_i - ((k/l)*e^{l*x}-2*x+c)/(k*e^{l*x}-2)</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="comment">                 * Initial estimate: x_0 = a+s*(b-a)</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="comment">                 */</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                uint32_t iter = 0, maxIter = 10;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                <span class="keywordtype">double</span> c = s/n+sa, x0 = a+s*(b-a), x = x0;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                        <span class="keywordtype">double</span> diff = k*exp(l*x)-2.0;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                        <span class="keywordflow">if</span> (abs(diff) &gt; 10.0*F64_EPS)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                x = x-((k/l)*exp(l*x)-2*x+c)/diff;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                } <span class="keywordflow">while</span> (x &gt;= a &amp;&amp; x &lt;= b &amp;&amp; ++iter &lt; maxIter);</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                <span class="keywordflow">if</span> (x &lt; a || x &gt; b)     {</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                        <span class="comment">// Newton method diverged, select initial estimate.</span></div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                        x = x0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                }</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                <span class="comment">// With respect to &#39;x&#39; value calculate ,,float index&#39;&#39; of the circuit to select.</span></div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">double</span> selIdxFloat = (x-a)/(b-a);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="comment">// &quot;float index&quot; -&gt; &quot;integer index&quot;</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                selIdx = <span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(selIdxFloat*numberOfAlternatives);</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                selIdx = (selIdx &lt; numberOfAlternatives) ? selIdx : numberOfAlternatives-1;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <span class="comment">// Too small cycle time differences or only one alternative.</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                uniform_int_distribution&lt;uint32_t&gt; selAlt(0, numberOfAlternatives-1);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                selIdx = selAlt(threadGenerator);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        }</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <span class="keywordflow">return</span> selIdx;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;}</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#aad20eb616735ba3814a0efa76c837816">  700</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classParallelHeuristicSolver.html#aad20eb616735ba3814a0efa76c837816">ParallelHeuristicSolver::calculateNewCycleTime</a>(<span class="keyword">const</span> uint32_t&amp; threadId, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; currentCycleTime, vector&lt;StaticActivity*&gt;&amp; alternative,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                vector&lt;Location*&gt;&amp; fixed, <a class="code" href="classLocation.html">Location</a> *toFix, <a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a>&amp; precalculatedCircuits)        {</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keyword">const</span> uint64_t&amp; idx = find_if(fixed.cbegin(), fixed.cend(), [&amp;toFix](<a class="code" href="classLocation.html">Location</a>* l) { <span class="keywordflow">return</span> toFix-&gt;parent() == l-&gt;parent(); })-fixed.cbegin();</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        <span class="keywordflow">if</span> (idx &lt; fixed.size()) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                <a class="code" href="classLocation.html">Location</a> *previous = fixed[idx];</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                <span class="comment">// Check whether the location to be fixed is not already fixed.</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                <span class="keywordflow">if</span> (previous != toFix)  {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                        <span class="comment">// Create the set of newly fixed locations.</span></div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                        <a class="code" href="structShortestCircuit.html">ShortestCircuit</a> sc;</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;                        fixed[idx] = toFix;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                        sc.<a class="code" href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">circuit</a> = move(alternative);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                        sc.<a class="code" href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">fixedLocations</a> = move(fixed);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;                        <span class="comment">// Check whether the cycle time was already calculated for the given alternative and fixed locations.</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;                        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; sit = precalculatedCircuits.find(sc);</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                        <span class="keywordflow">if</span> (sit != precalculatedCircuits.cend())        {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                <span class="comment">// Yes, it was already calculated, get it from the hash map...</span></div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                                fixed = move(sc.<a class="code" href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">fixedLocations</a>); fixed[idx] = previous;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                                alternative = move(sc.<a class="code" href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">circuit</a>);</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                                <span class="keywordflow">return</span> (sit-&gt;second).minLength;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                                <span class="comment">// Copy values back as they need to be preserved.</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                fixed = sc.<a class="code" href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">fixedLocations</a>; fixed[idx] = previous;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                                alternative = sc.<a class="code" href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">circuit</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                                <span class="comment">// Unfortunately, it is not ,,cached&#39;&#39;. Insert a new record.</span></div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                                <span class="keyword">const</span> <span class="keyword">auto</span>&amp; p = precalculatedCircuits.emplace(move(sc), <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">getShortestCircuit</a>(threadId, sc.<a class="code" href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">circuit</a>, sc.<a class="code" href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">fixedLocations</a>, <span class="keyword">false</span>));</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                                <span class="comment">// Return the shortest possible circuit length.</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                                <span class="keywordflow">return</span> (*p.first).second.minLength;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                        }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                        <span class="comment">// Since the location to be fixed has already been fixed, the cycle time will not change.</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                        <span class="keywordflow">return</span> currentCycleTime;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                }</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                <span class="keywordflow">throw</span> <a class="code" href="classInvalidArgument.html">InvalidArgument</a>(caller(), <span class="stringliteral">&quot;Invalid toFix argument, it should belong to the related robot!&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;}</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div>
<div class="line"><a name="l00738"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a28ae0a0e88f07796bb67480a933f979b">  738</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#a28ae0a0e88f07796bb67480a933f979b">ParallelHeuristicSolver::addRandomTuplesToKB</a>(<span class="keyword">const</span> uint32_t&amp; threadId, <span class="keyword">const</span> uint32_t&amp; numOfTuples,</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                vector&lt;vector&lt;CircuitRecord&gt;&gt;&amp; initialCircuits, <a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a>&amp; precalculatedCircuits)   {</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;        high_resolution_clock::time_point start = high_resolution_clock::now();</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        default_random_engine threadGenerator(rd());</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        uint32_t numberOfAddedTuples = 0, iter = 0;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        uint32_t numberOfRobots = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.robots().size();</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;        <span class="keyword">const</span> uint32_t maxTuples = numOfTuples, maxIter = 10*maxTuples;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">while</span> (numberOfAddedTuples &lt; maxTuples &amp;&amp; iter &lt; maxIter)       {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="comment">// For each robot just one vector item.</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                vector&lt;double&gt; currentLengths(numberOfRobots);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                vector&lt;CircuitRecord*&gt; selectedCircuits(numberOfRobots);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                vector&lt;vector&lt;Location*&gt;&gt; currentFixedLocations(numberOfRobots);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="comment">// Select robot circuits</span></div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;                <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; numberOfRobots; ++r)   {</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                        uint32_t selIdx = <a class="code" href="classParallelHeuristicSolver.html#ae7c18787afc1e1c32b6e5d64f17cd666">selectAlternative</a>(initialCircuits[r]);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                        <a class="code" href="structCircuitRecord.html">CircuitRecord</a> *cr = &amp;initialCircuits[r][selIdx];</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                        currentLengths[r] = cr-&gt;<a class="code" href="structCircuitRecord.html#a6d4b145cca40b97ba37bfaf81d549c4e">hc</a>.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a>;</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                        selectedCircuits[r] = cr;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;                        currentFixedLocations[r] = cr-&gt;<a class="code" href="structCircuitRecord.html#afec4b8c9c7d279e6840490e91eb0ac3f">sc</a>.<a class="code" href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">fixedLocations</a>;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;                }</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;                <span class="keywordtype">bool</span> feasibleTuple = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;                <span class="comment">// Try to resolve spatial compatibility for the selected circuits.</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <a class="code" href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">mSortedSptCmp</a>.cbegin(); it != <a class="code" href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">mSortedSptCmp</a>.cend() &amp;&amp; feasibleTuple; ++it)       {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                        <span class="comment">// Extract information about the spatial compatibility pair.</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                        uint32_t r1 = get&lt;0&gt;(*it), r2 = get&lt;1&gt;(*it);    <span class="comment">// related robots</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                        <span class="keyword">const</span> vector&lt;pair&lt;Location*, Location*&gt;&gt;&amp; spatialCompatibility = get&lt;4&gt;(*it); <span class="comment">// compatible location pairs.</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                        assert(!spatialCompatibility.empty() &amp;&amp; <span class="stringliteral">&quot;Invalid initialization of spatialCompatibility!&quot;</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                        <span class="comment">// Evaluate suitability of each spatial compatibility pair in terms of penalty value.</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                        <span class="keywordtype">double</span> maxPenalty = 0.0;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                        vector&lt;double&gt; preferences;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                        vector&lt;pair&lt;double, double&gt;&gt; lengths;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                        lengths.reserve(spatialCompatibility.size());</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                        preferences.reserve(spatialCompatibility.size());</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                        <span class="keywordflow">for</span> (<span class="keyword">const</span> pair&lt;Location*, Location*&gt;&amp; p : spatialCompatibility)        {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                                uint32_t i = 0;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                                <span class="keywordtype">double</span> penalty = 0.0;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                                array&lt;double, 2&gt; newLengths;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;                                vector&lt;pair&lt;uint32_t, Location*&gt;&gt; vec = { {r1, p.first}, {r2, p.second}};</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                                <span class="keywordflow">for</span> (<span class="keyword">const</span> pair&lt;uint32_t, Location*&gt;&amp; e : vec)  {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                                        uint32_t robotId = e.first;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                                        <a class="code" href="classLocation.html">Location</a> *toFix = e.second;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                                        <span class="keywordtype">double</span> curLength = currentLengths[robotId];</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                                        <span class="comment">// It calculates the cycle time for a newly fixed location &#39;toFix&#39;.</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;                                        <span class="keywordtype">double</span> newMinCycleTime = <a class="code" href="classParallelHeuristicSolver.html#aad20eb616735ba3814a0efa76c837816">calculateNewCycleTime</a>(threadId, curLength, selectedCircuits[robotId]-&gt;sc.circuit,</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;                                                        currentFixedLocations[robotId], toFix, precalculatedCircuits);</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                                        penalty += <a class="code" href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">penaltyFunction</a>(newMinCycleTime, cycleTime);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                                        newLengths[i++] = newMinCycleTime;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                                }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                                maxPenalty = max(maxPenalty, penalty);</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                                preferences.push_back(penalty);         <span class="comment">// penalty will be transformed to the preference later</span></div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;                                lengths.emplace_back(newLengths[0], newLengths[1]);</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                        }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                        <span class="comment">// Transform penalties to selection preferences.</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                        <span class="keywordtype">double</span> sumOfPreferences = 0.0;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;                        vector&lt;double&gt;::iterator prefArray = preferences.begin();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;                        <span class="keywordflow">for</span> (uint32_t p = 0; p &lt; preferences.size(); ++p)       {</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;                                prefArray[p] = maxPenalty-prefArray[p];</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;                                sumOfPreferences += prefArray[p];</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;                        }</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;                        <span class="comment">// Wheel of fortune - wheelValue decides which pair will be used to resolve compatibility.</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;                        uniform_real_distribution&lt;double&gt; wheel(0.0, sumOfPreferences);</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                        <span class="keywordtype">double</span> wheelValue = wheel(threadGenerator), accumulatedValue = 0.0;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;                        <span class="comment">// Find the index to the ,,randomly&quot; selected pair.</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                        uint32_t selIdx = 0;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                        <span class="keywordflow">for</span> (uint32_t p = 0; p &lt; preferences.size(); ++p)       {</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                                <span class="keywordtype">double</span> currentPref = prefArray[p];</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                                <span class="keywordflow">if</span> (accumulatedValue &lt;= wheelValue &amp;&amp; wheelValue &lt;= accumulatedValue+currentPref)       {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                                        selIdx = p;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                                }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                                accumulatedValue += currentPref;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                        }</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                        <span class="keywordflow">if</span> (maxPenalty-prefArray[selIdx] &lt;= 20.0)       {</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                <span class="comment">// The tuple is still feasible, i.e. only feasible circuits were selected as a spatial compatibility resolution.</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                                <span class="comment">// Update the minimal lengths of the circuits going through the newly fixed locations.</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                                currentLengths[r1] = lengths[selIdx].first;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                                currentLengths[r2] = lengths[selIdx].second;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                                <span class="comment">// Update the currently fixed locations with respect to the selected pair.</span></div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                                <span class="keyword">const</span> pair&lt;Location*, Location*&gt;&amp; cmpPair = spatialCompatibility[selIdx];</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                                <a class="code" href="classLocation.html">Location</a> *newlyFixed1 = cmpPair.first, *newlyFixed2 = cmpPair.second;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                                vector&lt;Location*&gt; *fl1 = &amp;currentFixedLocations[r1], *fl2 = &amp;currentFixedLocations[r2];</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;                                <span class="keyword">auto</span> pred = [&amp;](<a class="code" href="classLocation.html">Location</a>* l)    {</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;                                        <span class="keywordflow">return</span> l-&gt;parent() == newlyFixed1-&gt;parent() || l-&gt;parent() == newlyFixed2-&gt;parent();</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                };</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;                                replace_if(fl1-&gt;begin(), fl1-&gt;end(), pred, newlyFixed1);</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                                replace_if(fl2-&gt;begin(), fl2-&gt;end(), pred, newlyFixed2);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                                <span class="comment">// Penalty higher than 20.0 indicates that the selected pair is resulting in an infeasible solution.</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                                feasibleTuple = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                        }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;                }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                <span class="keywordflow">if</span> (feasibleTuple == <span class="keyword">true</span>)      {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;                        <a class="code" href="structCircuitTuple.html">CircuitTuple</a> candidate;</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                        <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; numberOfRobots; ++r)   {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                                <span class="keyword">const</span> vector&lt;StaticActivity*&gt; alternative = selectedCircuits[r]-&gt;sc.circuit;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;                                <span class="keyword">const</span> vector&lt;Location*&gt;&amp; fixed = currentFixedLocations[r];</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                                <span class="keyword">auto</span> sit = precalculatedCircuits.find(<a class="code" href="structShortestCircuit.html">ShortestCircuit</a>(alternative, fixed));</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                <span class="keywordflow">if</span> (sit != precalculatedCircuits.cend())        {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                                        <span class="keywordflow">if</span> (sit-&gt;second.circuit.empty())</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                                sit-&gt;second = <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">getShortestCircuit</a>(threadId, alternative, fixed);</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                        candidate.<a class="code" href="structCircuitTuple.html#a6e3a0eba954d892097950b15fb5cd0f5">tuple</a>.emplace_back(sit-&gt;first, sit-&gt;second);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                                        <span class="keywordflow">throw</span> <a class="code" href="classSolverException.html">SolverException</a>(caller(), <span class="stringliteral">&quot;A bug in the generation of tuples, it should be stored in the map!&quot;</span>);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                                }</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                        }</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                        <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a94bb9531764a3e8015dd5b4b8d5ab2e0">addTuple</a>(move(candidate));</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;                        ++numberOfAddedTuples;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;                }</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                ++iter;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        }</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a3540b21b027eabf9fc6ed1cfbf839251">recordAddTuplesCall</a>(duration_cast&lt;duration&lt;double&gt;&gt;(high_resolution_clock::now()-start).count());</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;}</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#ab247b5c61bc4d777d5d1ce87718f50ed">  873</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#ab247b5c61bc4d777d5d1ce87718f50ed">ParallelHeuristicSolver::generatePromisingTuples</a>(<span class="keyword">const</span> uint32_t&amp; threadId) {</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <a class="code" href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a> precalculated;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        <span class="keyword">const</span> uint32_t numOfPromisingTuples = 10u;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        uint32_t numberOfRobots = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.robots().size();</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;        <span class="comment">// vector&lt;set&lt;CircuitRecord&gt;&gt; should be used instead...</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        vector&lt;vector&lt;CircuitRecord&gt;&gt; initialCircuits(numberOfRobots);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;        list&lt;pair&lt;Solution, CircuitTuple&gt;&gt; elites = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a1512683ac012fcb7bce791a001850bab">eliteSolutions</a>();</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> pair&lt;Solution, CircuitTuple&gt;&amp; p : elites)    {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                <span class="keyword">const</span> vector&lt;CircuitRecord&gt;&amp; circuits = p.second.tuple;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                assert(circuits.size() == numberOfRobots &amp;&amp; <span class="stringliteral">&quot;Invalid tuple stored in the knowledge base!&quot;</span>);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; circuits.size(); ++r)  {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                        initialCircuits[r].push_back(circuits[r]);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                        precalculated.emplace(circuits[r].sc, circuits[r].hc);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                }</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; numberOfRobots; ++r)</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                sort(initialCircuits[r].begin(), initialCircuits[r].end());</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">if</span> (elites.size() &gt; 1u) {</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                <span class="comment">// Remark: Control thread id is zero.</span></div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                <a class="code" href="classParallelHeuristicSolver.html#a28ae0a0e88f07796bb67480a933f979b">addRandomTuplesToKB</a>(threadId, numOfPromisingTuples, initialCircuits, precalculated);</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        }</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div>
<div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a26dba51d1509305ce3cf966176b88d44">  898</a></span>&#160;<span class="keywordtype">double</span> <a class="code" href="classParallelHeuristicSolver.html#a26dba51d1509305ce3cf966176b88d44">ParallelHeuristicSolver::changeRobotPaths</a>(uint32_t threadId, <span class="keyword">const</span> <a class="code" href="structCircuitTuple.html">CircuitTuple</a>&amp; t, <a class="code" href="structPartialSolution.html">PartialSolution</a>&amp; ps, <span class="keyword">const</span> vector&lt;vector&lt;Location*&gt;&gt;&amp; fixed) {</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordtype">double</span> minCycleTime = 0.0;</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keyword">const</span> vector&lt;Robot*&gt;&amp; robots = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.robots();</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        uint32_t numberOfRobots = robots.size();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        <span class="keywordtype">double</span> cycleTime = <a class="code" href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">mLine</a>.productionCycleTime();</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;        <span class="keywordflow">for</span> (uint32_t r = 0; r &lt; numberOfRobots; ++r)   {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                vector&lt;Location*&gt; candidatesToFix;</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="classActivity.html">Activity</a> *a : robots[r]-&gt;activities())     {</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                        <a class="code" href="classStaticActivity.html">StaticActivity</a> *sa = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classStaticActivity.html">StaticActivity</a>*<span class="keyword">&gt;</span>(a);</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                        <span class="keywordflow">if</span> (sa != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">mMapping</a>.<a class="code" href="structPrecalculatedMapping.html#a91f9afd9f5400e27ff5048ca640f23f7">sptComp</a>.count(sa) == 0)   {</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                                <span class="keywordflow">for</span> (<a class="code" href="classLocation.html">Location</a>* l : sa-&gt;locations())</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                                        candidatesToFix.push_back(l);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                        }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                shuffle(candidatesToFix.begin(), candidatesToFix.end(), default_random_engine(rd()));</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                assert(r &lt; fixed.size() &amp;&amp; <span class="stringliteral">&quot;Invalid dimensions of the input argument!&quot;</span>);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                uint32_t idx = 0;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                <span class="keywordtype">bool</span> pathChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                vector&lt;Location*&gt; toFix = fixed[r], path = ps.<a class="code" href="structPartialSolution.html#a50fb6d7e10ac824afeeb56724d8c7468">locs</a>[r];</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="keyword">const</span> vector&lt;StaticActivity*&gt;&amp; alternative = t.<a class="code" href="structCircuitTuple.html#a6e3a0eba954d892097950b15fb5cd0f5">tuple</a>[r].sc.circuit;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">while</span> (!pathChanged &amp;&amp; idx &lt; candidatesToFix.size())    {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                        toFix.push_back(candidatesToFix[idx]);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                        <a class="code" href="structHamiltonianCircuit.html">HamiltonianCircuit&lt;Location&gt;</a> hc = <a class="code" href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">getShortestCircuit</a>(threadId, alternative, toFix, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                        <span class="keywordflow">if</span> (hc.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a> &lt;= cycleTime)  {</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                                path = hc.<a class="code" href="structHamiltonianCircuit.html#af08c639cf473186aa0c0802ec9f43bc8">circuit</a>;</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                                minCycleTime = max(minCycleTime, hc.<a class="code" href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">minLength</a>);</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                                pathChanged = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                        }</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                        toFix.pop_back();</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                        ++idx;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                }</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                ps.<a class="code" href="structPartialSolution.html#a50fb6d7e10ac824afeeb56724d8c7468">locs</a>[r] = path;</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;        }</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;        <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aeb671477963887a89451c260ae4bfe2e">recordChangePathCall</a>();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;        <span class="keywordflow">return</span> minCycleTime;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;}</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div>
<div class="line"><a name="l00941"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a377a1376f55138ee5f1aa4f1c4200991">  941</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#a377a1376f55138ee5f1aa4f1c4200991">ParallelHeuristicSolver::printProgressInfo</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; currentRuntime)   {</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tupleGen = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a93a30b5b236d60758752d82d444f75b3">infoTuplesGeneration</a>(), &amp;itersPerTuple = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a0e945a82cfc3e39273324d68b7547c94">infoItersPerTuple</a>();</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; LPInfo = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a9cb3b94c49a8927c1cf170ac96e78878">infoLP</a>(), &amp;infoLocHeur = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#af40b6a9b35e20efe4d3c4817b765bab8">infoLocHeur</a>(), &amp;infoPwrmHeur = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aa41d69fcbb34acbfd3f6ac9dabaa695d">infoPwrmHeur</a>();</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;        clog&lt;&lt;string(35, <span class="charliteral">&#39;=&#39;</span>)&lt;&lt;<span class="stringliteral">&quot; STAT INFO &quot;</span>&lt;&lt;string(35, <span class="charliteral">&#39;=&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;current runtime: &quot;</span>&lt;&lt;currentRuntime&lt;&lt;endl;</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;        clog&lt;&lt;string(81, <span class="charliteral">&#39;-&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;generated tuples: &quot;</span>&lt;&lt;tupleGen.first&lt;&lt;<span class="stringliteral">&quot; (&quot;</span>&lt;&lt;tupleGen.second*1000.0&lt;&lt;<span class="stringliteral">&quot; ms per tuple)&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;percentage of processed: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a6b68f2cc47257998e0d7dab77594ddf5">percentageOfProcessed</a>()&lt;&lt;<span class="stringliteral">&quot; %&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;average number of iters per tuple: &quot;</span>&lt;&lt;itersPerTuple.second&lt;&lt;endl;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;        clog&lt;&lt;string(81, <span class="charliteral">&#39;-&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Linear Programming solver: &quot;</span>&lt;&lt;LPInfo.first&lt;&lt;<span class="stringliteral">&quot; calls (&quot;</span>&lt;&lt;LPInfo.second*1000.0&lt;&lt;<span class="stringliteral">&quot; ms per call)&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Infeasibility rate: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a3447d2895233dbdd3fce200c9e576ae5">infeasibilityRate</a>()*100.0&lt;&lt;<span class="stringliteral">&quot; %&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Average number of LP calls for collisions resolution: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a1aaf7fe1cdd30632776c1e797fbffc85">averageNumberOfLPCallsForLPFix</a>()&lt;&lt;endl;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Average deterioration in quality after collisions resolution: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a6dd80e9362c284d03ba93bf3362375d4">averageLPFixDeterioration</a>()*100.0&lt;&lt;<span class="stringliteral">&quot; %&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Number of feasibility breaks: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#ae48a54a68e14e4b203926d2ec215886d">numberOfLPBreaks</a>()&lt;&lt;endl;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        clog&lt;&lt;string(81, <span class="charliteral">&#39;-&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Change location heuristic: &quot;</span>&lt;&lt;infoLocHeur.first&lt;&lt;<span class="stringliteral">&quot; calls (&quot;</span>&lt;&lt;infoLocHeur.second*1000.0&lt;&lt;<span class="stringliteral">&quot; ms per call)&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Average error of energy estimation: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a752080b279d47c9a4ff095ae9e594009">averageErrOfLocHeur</a>()*100.0&lt;&lt;<span class="stringliteral">&quot; %&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Number of feasibility breaks: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aca88e4a0e4c396e93dff26697600c0e0">numberOfLocHeurBreaks</a>()&lt;&lt;endl;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        clog&lt;&lt;string(81, <span class="charliteral">&#39;-&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Change power mode heuristic: &quot;</span>&lt;&lt;infoPwrmHeur.first&lt;&lt;<span class="stringliteral">&quot; calls (&quot;</span>&lt;&lt;infoPwrmHeur.second*1000.0&lt;&lt;<span class="stringliteral">&quot; ms per call)&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Average error of energy estimation: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a582439557d6cd10491cc3de385acaf0a">averageErrOfPwrmHeur</a>()*100.0&lt;&lt;<span class="stringliteral">&quot; %&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Number of feasibility breaks: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#af22e21676df12dfdd0d74aac54e79115">numberOfPwrmHeurBreaks</a>()&lt;&lt;endl;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        clog&lt;&lt;string(81, <span class="charliteral">&#39;-&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Change path algorithm: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a2a7a50044de9484c54cbc91ed254e030">pathChangeCalls</a>()&lt;&lt;<span class="stringliteral">&quot; calls&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;        clog&lt;&lt;<span class="stringliteral">&quot;Number of feasibility breaks: &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aa8f69fa532f019ee783392d6165402a8">numberOfChangePathBreaks</a>()&lt;&lt;endl;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;        clog&lt;&lt;string(34, <span class="charliteral">&#39;=&#39;</span>)&lt;&lt;<span class="stringliteral">&quot; END OF INFO &quot;</span>&lt;&lt;string(34, <span class="charliteral">&#39;=&#39;</span>)&lt;&lt;endl;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;}</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="classParallelHeuristicSolver.html#a718e534c49e653598892a55e53d9d91e">  970</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classParallelHeuristicSolver.html#a718e534c49e653598892a55e53d9d91e">ParallelHeuristicSolver::writePerformanceRecordToLogFile</a>(<span class="keyword">const</span> <span class="keywordtype">double</span>&amp; initializationTime, <span class="keyword">const</span> <span class="keywordtype">double</span>&amp; finalRuntime)     {</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="namespaceSettings.html#a46a8fc3b810575540b7000e8418791b7">Settings::RESULTS_DIRECTORY</a>.empty())       {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;                <span class="keywordtype">string</span> pathToPerformaceLog = <a class="code" href="namespaceSettings.html#a46a8fc3b810575540b7000e8418791b7">Settings::RESULTS_DIRECTORY</a>+<span class="stringliteral">&quot;performance_log.csv&quot;</span>;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                <span class="keywordtype">bool</span> exists = <a class="code" href="Utils_8h.html#a57f19363421d5a671e576986ece92b2a">fileExists</a>(pathToPerformaceLog);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                ofstream perfLog(pathToPerformaceLog.c_str(), ofstream::app);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;                <span class="keywordflow">if</span> (perfLog.good())     {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                        <span class="keywordflow">if</span> (!exists)    {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                                perfLog&lt;&lt;<span class="stringliteral">&quot;initialization time [s], generated tuples, time per tuple [ms], processed tuples [%], average number of iters per tuple, &quot;</span>;</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                                perfLog&lt;&lt;<span class="stringliteral">&quot;number of calls of Linear Programming, time per call [ms], infeasibility rate [%], LP calls to collisions resolution, &quot;</span>;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                                perfLog&lt;&lt;<span class="stringliteral">&quot;average deterioration after collisions resolution [%], feasibility breaks, number of calls of change location heuristic, &quot;</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                                perfLog&lt;&lt;<span class="stringliteral">&quot;time per call [ms], estimation error [%], feasibility breaks, number of calls of power mode heuristic, time per call [ms], &quot;</span>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                                perfLog&lt;&lt;<span class="stringliteral">&quot;estimation error [%], feasibility breaks, number of calls of change path, feasibility breaks, runtime [s]&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;                        }</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; tupleGen = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a93a30b5b236d60758752d82d444f75b3">infoTuplesGeneration</a>(), &amp;itersPerTuple = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a0e945a82cfc3e39273324d68b7547c94">infoItersPerTuple</a>();</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        <span class="keyword">const</span> <span class="keyword">auto</span>&amp; LPInfo = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a9cb3b94c49a8927c1cf170ac96e78878">infoLP</a>(), &amp;infoLocHeur = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#af40b6a9b35e20efe4d3c4817b765bab8">infoLocHeur</a>(), &amp;infoPwrmHeur = <a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aa41d69fcbb34acbfd3f6ac9dabaa695d">infoPwrmHeur</a>();</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                        perfLog&lt;&lt;initializationTime&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;tupleGen.first&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;1000.0*tupleGen.second&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a6b68f2cc47257998e0d7dab77594ddf5">percentageOfProcessed</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;itersPerTuple.second&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                        perfLog&lt;&lt;LPInfo.first&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;1000.0*LPInfo.second&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;100.0*<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a3447d2895233dbdd3fce200c9e576ae5">infeasibilityRate</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a1aaf7fe1cdd30632776c1e797fbffc85">averageNumberOfLPCallsForLPFix</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                        perfLog&lt;&lt;100.0*<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a6dd80e9362c284d03ba93bf3362375d4">averageLPFixDeterioration</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#ae48a54a68e14e4b203926d2ec215886d">numberOfLPBreaks</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;infoLocHeur.first&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;1000.0*infoLocHeur.second&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                        perfLog&lt;&lt;100.0*<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a752080b279d47c9a4ff095ae9e594009">averageErrOfLocHeur</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aca88e4a0e4c396e93dff26697600c0e0">numberOfLocHeurBreaks</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;infoPwrmHeur.first&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;1000.0*infoPwrmHeur.second&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                        perfLog&lt;&lt;100.0*<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a582439557d6cd10491cc3de385acaf0a">averageErrOfPwrmHeur</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#af22e21676df12dfdd0d74aac54e79115">numberOfPwrmHeurBreaks</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#a2a7a50044de9484c54cbc91ed254e030">pathChangeCalls</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                        perfLog&lt;&lt;<a class="code" href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">mKB</a>.<a class="code" href="classKnowledgeBase.html#aa8f69fa532f019ee783392d6165402a8">numberOfChangePathBreaks</a>()&lt;&lt;<span class="stringliteral">&quot;, &quot;</span>&lt;&lt;finalRuntime&lt;&lt;endl;</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                        perfLog.close();</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                        cerr&lt;&lt;<span class="stringliteral">&quot;Warning: Cannot open &#39;&quot;</span>&lt;&lt;pathToPerformaceLog&lt;&lt;<span class="stringliteral">&quot;&#39; file for writing!&quot;</span>&lt;&lt;endl;</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                }</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        }</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="ttc" id="SolverInterface_8h_html_a613bc503b250931f3d8268b122a87728"><div class="ttname"><a href="SolverInterface_8h.html#a613bc503b250931f3d8268b122a87728">initializeLocalEnvironments</a></div><div class="ttdeci">void initializeLocalEnvironments(int numberOfThreads)</div><div class="ttdoc">It enables the solver to initialize all the data structures (e.g. expensive to construct) required fo...</div><div class="ttdef"><b>Definition:</b> <a href="GurobiSolver_8cpp_source.html#l00040">GurobiSolver.cpp:40</a></div></div>
<div class="ttc" id="classMovement_html"><div class="ttname"><a href="classMovement.html">Movement</a></div><div class="ttdoc">The instance of the class corresponds to a robot movement between two coordinates. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00133">RoboticLine.h:133</a></div></div>
<div class="ttc" id="structHamiltonianCircuit_html_af08c639cf473186aa0c0802ec9f43bc8"><div class="ttname"><a href="structHamiltonianCircuit.html#af08c639cf473186aa0c0802ec9f43bc8">HamiltonianCircuit::circuit</a></div><div class="ttdeci">std::vector&lt; T * &gt; circuit</div><div class="ttdoc">Closed path through locations or static activities, each static activity is visited just once...</div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00089">DataStructures.h:89</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_aa8f69fa532f019ee783392d6165402a8"><div class="ttname"><a href="classKnowledgeBase.html#aa8f69fa532f019ee783392d6165402a8">KnowledgeBase::numberOfChangePathBreaks</a></div><div class="ttdeci">uint64_t numberOfChangePathBreaks() const </div><div class="ttdoc">Returns how many times the change of paths resulted in infeasibility. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00085">KnowledgeBase.h:85</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_af33bb9ccbb71221a2ce00f2314cc0dcb"><div class="ttname"><a href="classParallelHeuristicSolver.html#af33bb9ccbb71221a2ce00f2314cc0dcb">ParallelHeuristicSolver::mSortedSptCmp</a></div><div class="ttdeci">std::vector&lt; SpatialCmpTuple &gt; mSortedSptCmp</div><div class="ttdoc">The vector of spatial compatibility pairs heuristically sorted in decreasing order of difficulty...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00214">ParallelHeuristicSolver.h:214</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a94bb9531764a3e8015dd5b4b8d5ab2e0"><div class="ttname"><a href="classKnowledgeBase.html#a94bb9531764a3e8015dd5b4b8d5ab2e0">KnowledgeBase::addTuple</a></div><div class="ttdeci">void addTuple(CircuitTuple &amp;&amp;t)</div><div class="ttdoc">Add a tuple to the mutex protected queue of tuples. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00072">KnowledgeBase.cpp:72</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_adfa5a088ab37a43d0592e58b611ce10b"><div class="ttname"><a href="classParallelHeuristicSolver.html#adfa5a088ab37a43d0592e58b611ce10b">ParallelHeuristicSolver::mLine</a></div><div class="ttdeci">RoboticLine mLine</div><div class="ttdoc">Robotic cell to be optimized. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00198">ParallelHeuristicSolver.h:198</a></div></div>
<div class="ttc" id="classActivity_html"><div class="ttname"><a href="classActivity.html">Activity</a></div><div class="ttdoc">The base class incorporating common properties of robot operations and movements. ...</div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00068">RoboticLine.h:68</a></div></div>
<div class="ttc" id="structSolution_html"><div class="ttname"><a href="structSolution.html">Solution</a></div><div class="ttdoc">The structure representing a solution found by an algorithm. </div><div class="ttdef"><b>Definition:</b> <a href="Solution_8h_source.html#l00050">Solution.h:50</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_aca88e4a0e4c396e93dff26697600c0e0"><div class="ttname"><a href="classKnowledgeBase.html#aca88e4a0e4c396e93dff26697600c0e0">KnowledgeBase::numberOfLocHeurBreaks</a></div><div class="ttdeci">uint64_t numberOfLocHeurBreaks() const </div><div class="ttdoc">Returns how many times the change locations sub-heuristic caused the infeasibility of the solution...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00077">KnowledgeBase.h:77</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a28ae0a0e88f07796bb67480a933f979b"><div class="ttname"><a href="classParallelHeuristicSolver.html#a28ae0a0e88f07796bb67480a933f979b">ParallelHeuristicSolver::addRandomTuplesToKB</a></div><div class="ttdeci">void addRandomTuplesToKB(const uint32_t &amp;threadId, const uint32_t &amp;numOfTuples, std::vector&lt; std::vector&lt; CircuitRecord &gt;&gt; &amp;initialCircuits, PrecalculatedCircuits &amp;precalculatedCircuits)</div><div class="ttdoc">It generates and adds a requested number of tuples to the KnowledgeBase. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00738">ParallelHeuristicSolver.cpp:738</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_ac9dcf8faf21774a45ac779030626a8fd"><div class="ttname"><a href="classParallelHeuristicSolver.html#ac9dcf8faf21774a45ac779030626a8fd">ParallelHeuristicSolver::ParallelHeuristicSolver</a></div><div class="ttdeci">ParallelHeuristicSolver(const RoboticLine &amp;l, const PrecalculatedMapping &amp;m)</div><div class="ttdoc">It initializes the heuristic, i.e. preallocates some arrays, calculates the length of the tabu list...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00038">ParallelHeuristicSolver.cpp:38</a></div></div>
<div class="ttc" id="namespaceSettings_html_a0fcda7e67e18bde0be384464eeeeda95"><div class="ttname"><a href="namespaceSettings.html#a0fcda7e67e18bde0be384464eeeeda95">Settings::MAX_ALTERNATIVES</a></div><div class="ttdeci">uint32_t MAX_ALTERNATIVES</div><div class="ttdoc">The maximal number of alternative orders generated for each robot. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00043">Settings.cpp:43</a></div></div>
<div class="ttc" id="classRobot_html"><div class="ttname"><a href="classRobot.html">Robot</a></div><div class="ttdoc">Instance of this class includes all the data structures and methods related to a robot. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00432">RoboticLine.h:432</a></div></div>
<div class="ttc" id="structGraph_html_aa8bc6eefadb5987750be3901ea7d87c3"><div class="ttname"><a href="structGraph.html#aa8bc6eefadb5987750be3901ea7d87c3">Graph::idToActivity</a></div><div class="ttdeci">std::vector&lt; StaticActivity * &gt; idToActivity</div><div class="ttdoc">Node index to static activity, note that dynamic activities are already incorporated in the lengths o...</div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00073">DataStructures.h:73</a></div></div>
<div class="ttc" id="structPartialSolution_html_a50fb6d7e10ac824afeeb56724d8c7468"><div class="ttname"><a href="structPartialSolution.html#a50fb6d7e10ac824afeeb56724d8c7468">PartialSolution::locs</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Location * &gt; &gt; locs</div><div class="ttdoc">Selected locations for each robot, time ordered. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLineSolverLP_8h_source.html#l00045">RoboticLineSolverLP.h:45</a></div></div>
<div class="ttc" id="Exceptions_8h_html_ac47753955681ccd5663d290bbf1ab688"><div class="ttname"><a href="Exceptions_8h.html#ac47753955681ccd5663d290bbf1ab688">exceptionToString</a></div><div class="ttdeci">std::string exceptionToString(const std::exception &amp;e, uint32_t level=0)</div><div class="ttdoc">The recursive method creates the formatted error message for the given exception and their nested sub...</div><div class="ttdef"><b>Definition:</b> <a href="Exceptions_8cpp_source.html#l00049">Exceptions.cpp:49</a></div></div>
<div class="ttc" id="DataStructures_8h_html_a6d7070fb4665f8ddd682119b16d891e9"><div class="ttname"><a href="DataStructures_8h.html#a6d7070fb4665f8ddd682119b16d891e9">PrecalculatedCircuits</a></div><div class="ttdeci">std::unordered_map&lt; ShortestCircuit, HamiltonianCircuit&lt; Location &gt;&gt; PrecalculatedCircuits</div><div class="ttdoc">Mapping of ShortestCircuit to the related shortest closed path through locations. ...</div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00404">DataStructures.h:404</a></div></div>
<div class="ttc" id="classHeuristicAlgorithms_html_aa36d3769a748d8c3ded630c515e0e8ad"><div class="ttname"><a href="classHeuristicAlgorithms.html#aa36d3769a748d8c3ded630c515e0e8ad">HeuristicAlgorithms::initializePartialSolution</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Location * &gt; &gt; initializePartialSolution(PartialSolution &amp;ps) const </div><div class="ttdoc">It appends the fixed movements (implied from fixed locations), and optionally fastest power saving mo...</div><div class="ttdef"><b>Definition:</b> <a href="HeuristicAlgorithms_8cpp_source.html#l00107">HeuristicAlgorithms.cpp:107</a></div></div>
<div class="ttc" id="structHamiltonianCircuit_html"><div class="ttname"><a href="structHamiltonianCircuit.html">HamiltonianCircuit&lt; Location &gt;</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a56021d5c648f710d874346e6aa1c4dc3"><div class="ttname"><a href="classParallelHeuristicSolver.html#a56021d5c648f710d874346e6aa1c4dc3">ParallelHeuristicSolver::generateShortestCircuits</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; CircuitRecord &gt; &gt; generateShortestCircuits(PrecalculatedCircuits &amp;precalculatedCircuits)</div><div class="ttdoc">It finds random alternatives for each robot and calculates their shortest closed paths through locati...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00545">ParallelHeuristicSolver.cpp:545</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_afb59f538b3ced2d0388e82f837c05894"><div class="ttname"><a href="classParallelHeuristicSolver.html#afb59f538b3ced2d0388e82f837c05894">ParallelHeuristicSolver::workerThread</a></div><div class="ttdeci">void workerThread(uint32_t threadId, std::vector&lt; std::vector&lt; CircuitRecord &gt;&gt; initialCircuits, PrecalculatedCircuits precalculatedCircuits)</div><div class="ttdoc">The worker thread generates initial tuples, and optimizes them by local modifications proposed by sub...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00156">ParallelHeuristicSolver.cpp:156</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a26dba51d1509305ce3cf966176b88d44"><div class="ttname"><a href="classParallelHeuristicSolver.html#a26dba51d1509305ce3cf966176b88d44">ParallelHeuristicSolver::changeRobotPaths</a></div><div class="ttdeci">double changeRobotPaths(uint32_t threadId, const CircuitTuple &amp;t, PartialSolution &amp;ps, const std::vector&lt; std::vector&lt; Location * &gt;&gt; &amp;fixed)</div><div class="ttdoc">It randomly modifies the robot paths to enable the heuristic to search otherwise unreachable parts of...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00898">ParallelHeuristicSolver.cpp:898</a></div></div>
<div class="ttc" id="classDynamicActivity_html"><div class="ttname"><a href="classDynamicActivity.html">DynamicActivity</a></div><div class="ttdoc">Collection of movements between two static activities. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00261">RoboticLine.h:261</a></div></div>
<div class="ttc" id="structSolution_html_a979cc1f2b8a0ff0fbdf81d700025827e"><div class="ttname"><a href="structSolution.html#a979cc1f2b8a0ff0fbdf81d700025827e">Solution::runTime</a></div><div class="ttdeci">double runTime</div><div class="ttdoc">Run time (seconds) of the optimization algorithm required for obtaining this solution. </div><div class="ttdef"><b>Definition:</b> <a href="Solution_8h_source.html#l00061">Solution.h:61</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a781633e419bfeaa0401b931fc7f7faee"><div class="ttname"><a href="classParallelHeuristicSolver.html#a781633e419bfeaa0401b931fc7f7faee">ParallelHeuristicSolver::mFeasible</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mFeasible</div><div class="ttdoc">Used to stop other OpenMP threads if the instance infeasibility is detected by a thread. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00193">ParallelHeuristicSolver.h:193</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_af48f16196e4f6465687ee49e375215e9"><div class="ttname"><a href="classKnowledgeBase.html#af48f16196e4f6465687ee49e375215e9">KnowledgeBase::getTuple</a></div><div class="ttdeci">CircuitTuple getTuple()</div><div class="ttdoc">Returns a partially fixed solution called tuple. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00079">KnowledgeBase.cpp:79</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a67b01e634388d9e3ea00a668806d928d"><div class="ttname"><a href="classParallelHeuristicSolver.html#a67b01e634388d9e3ea00a668806d928d">ParallelHeuristicSolver::mMapping</a></div><div class="ttdeci">PrecalculatedMapping mMapping</div><div class="ttdoc">Fast searching in the data structure of the robotic cell. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00202">ParallelHeuristicSolver.h:202</a></div></div>
<div class="ttc" id="structCircuitRecord_html"><div class="ttname"><a href="structCircuitRecord.html">CircuitRecord</a></div><div class="ttdoc">Shortest closed path through locations. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00113">DataStructures.h:113</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_adb316c78d863498532e062db7747497f"><div class="ttname"><a href="classParallelHeuristicSolver.html#adb316c78d863498532e062db7747497f">ParallelHeuristicSolver::penaltyFunction</a></div><div class="ttdeci">static double penaltyFunction(const double &amp;minCycle, const double &amp;demandedCycleTime)</div><div class="ttdoc">The function expressing the risk of exceeding the robot cycle time depending on its lower estimation...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00629">ParallelHeuristicSolver.cpp:629</a></div></div>
<div class="ttc" id="structShortestCircuit_html"><div class="ttname"><a href="structShortestCircuit.html">ShortestCircuit</a></div><div class="ttdoc">Hamiltonian circuit through static activities and the fixed locations. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00096">DataStructures.h:96</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a1512683ac012fcb7bce791a001850bab"><div class="ttname"><a href="classKnowledgeBase.html#a1512683ac012fcb7bce791a001850bab">KnowledgeBase::eliteSolutions</a></div><div class="ttdeci">std::list&lt; std::pair&lt; Solution, CircuitTuple &gt; &gt; eliteSolutions()</div><div class="ttdoc">Returns a list of elite solutions and their tuples from which they have been calculated. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00028">KnowledgeBase.cpp:28</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdoc">STL namespace. </div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a425459a8d9e46ede261734c984c3bcf4"><div class="ttname"><a href="classParallelHeuristicSolver.html#a425459a8d9e46ede261734c984c3bcf4">ParallelHeuristicSolver::solve</a></div><div class="ttdeci">Solution solve()</div><div class="ttdoc">It optimizes the robotic cell and returns the best found solution. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00064">ParallelHeuristicSolver.cpp:64</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_afa9311b7a30ceed77e990c89f7d51372"><div class="ttname"><a href="classParallelHeuristicSolver.html#afa9311b7a30ceed77e990c89f7d51372">ParallelHeuristicSolver::generateRandomAlternatives</a></div><div class="ttdeci">std::vector&lt; CircuitRecord &gt; generateRandomAlternatives(const uint32_t &amp;threadId, const Graph &amp;g, const DistanceMatrix&lt; double &gt; &amp;m)</div><div class="ttdoc">Generates some random alternatives, i.e. candidates for a feasible order, from a distance graph and d...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00330">ParallelHeuristicSolver.cpp:330</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_ae48a54a68e14e4b203926d2ec215886d"><div class="ttname"><a href="classKnowledgeBase.html#ae48a54a68e14e4b203926d2ec215886d">KnowledgeBase::numberOfLPBreaks</a></div><div class="ttdeci">uint64_t numberOfLPBreaks() const </div><div class="ttdoc">Returns how many times it was not possible to obtain an initial solution, i.e. timing. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00073">KnowledgeBase.h:73</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_af40b6a9b35e20efe4d3c4817b765bab8"><div class="ttname"><a href="classKnowledgeBase.html#af40b6a9b35e20efe4d3c4817b765bab8">KnowledgeBase::infoLocHeur</a></div><div class="ttdeci">std::pair&lt; uint64_t, double &gt; infoLocHeur()</div><div class="ttdoc">Returns the total number of HeuristicAlgorithms::heuristicLocationChanges calls and average runtime f...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00145">KnowledgeBase.cpp:145</a></div></div>
<div class="ttc" id="classSolverException_html"><div class="ttname"><a href="classSolverException.html">SolverException</a></div><div class="ttdoc">A general exception of the program. </div><div class="ttdef"><b>Definition:</b> <a href="Exceptions_8h_source.html#l00058">Exceptions.h:58</a></div></div>
<div class="ttc" id="structCircuitTuple_html_a6e3a0eba954d892097950b15fb5cd0f5"><div class="ttname"><a href="structCircuitTuple.html#a6e3a0eba954d892097950b15fb5cd0f5">CircuitTuple::tuple</a></div><div class="ttdeci">std::vector&lt; CircuitRecord &gt; tuple</div><div class="ttdoc">Tuple, i.e. a partially fixed problem. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00135">DataStructures.h:135</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a6b68f2cc47257998e0d7dab77594ddf5"><div class="ttname"><a href="classKnowledgeBase.html#a6b68f2cc47257998e0d7dab77594ddf5">KnowledgeBase::percentageOfProcessed</a></div><div class="ttdeci">double percentageOfProcessed()</div><div class="ttdoc">Percentage of the processed tuples. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00194">KnowledgeBase.cpp:194</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_ae7c18787afc1e1c32b6e5d64f17cd666"><div class="ttname"><a href="classParallelHeuristicSolver.html#ae7c18787afc1e1c32b6e5d64f17cd666">ParallelHeuristicSolver::selectAlternative</a></div><div class="ttdeci">uint32_t selectAlternative(const std::vector&lt; CircuitRecord &gt; &amp;alternatives) const </div><div class="ttdoc">It randomly selects a robot alternative according to a distribution function that slightly prefers th...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00641">ParallelHeuristicSolver.cpp:641</a></div></div>
<div class="ttc" id="classMovingAverage_html_a814915646f232a80093e40a35549c1a4"><div class="ttname"><a href="classMovingAverage.html#a814915646f232a80093e40a35549c1a4">MovingAverage::filled</a></div><div class="ttdeci">bool filled() const </div><div class="ttdoc">Returns whether the average is calculated from the full length. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00368">DataStructures.h:368</a></div></div>
<div class="ttc" id="structCircuitRecord_html_afec4b8c9c7d279e6840490e91eb0ac3f"><div class="ttname"><a href="structCircuitRecord.html#afec4b8c9c7d279e6840490e91eb0ac3f">CircuitRecord::sc</a></div><div class="ttdeci">ShortestCircuit sc</div><div class="ttdoc">Selected alternative and fixed locations. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00121">DataStructures.h:121</a></div></div>
<div class="ttc" id="structPrecalculatedMapping_html_a3f1b0a4c3afee92793910a820a5e2b44"><div class="ttname"><a href="structPrecalculatedMapping.html#a3f1b0a4c3afee92793910a820a5e2b44">PrecalculatedMapping::sptCompVec</a></div><div class="ttdeci">std::vector&lt; SpatialCmpTuple &gt; sptCompVec</div><div class="ttdoc">Enables to fast iterate through spatial compatibility elements. </div><div class="ttdef"><b>Definition:</b> <a href="PrecalculatedMapping_8h_source.html#l00092">PrecalculatedMapping.h:92</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a25f0552e58e0d45be3eeb7d86947c5ea"><div class="ttname"><a href="classParallelHeuristicSolver.html#a25f0552e58e0d45be3eeb7d86947c5ea">ParallelHeuristicSolver::controlThread</a></div><div class="ttdeci">void controlThread()</div><div class="ttdoc">Generates various alternatives, launches worker threads, prints progress info, joins the workers...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00083">ParallelHeuristicSolver.cpp:83</a></div></div>
<div class="ttc" id="structEdge_html"><div class="ttname"><a href="structEdge.html">Edge</a></div><div class="ttdoc">A graph edge in the distance graph. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00046">DataStructures.h:46</a></div></div>
<div class="ttc" id="structGraph_html_a28d19ea9c7d111f55fee78331abe88bd"><div class="ttname"><a href="structGraph.html#a28d19ea9c7d111f55fee78331abe88bd">Graph::edges</a></div><div class="ttdeci">std::vector&lt; Edge &gt; edges</div><div class="ttdoc">Graph edges. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00067">DataStructures.h:67</a></div></div>
<div class="ttc" id="structPrecalculatedMapping_html_a91f9afd9f5400e27ff5048ca640f23f7"><div class="ttname"><a href="structPrecalculatedMapping.html#a91f9afd9f5400e27ff5048ca640f23f7">PrecalculatedMapping::sptComp</a></div><div class="ttdeci">std::map&lt; StaticActivity *, std::map&lt; StaticActivity *, std::vector&lt; std::pair&lt; Location *, Location * &gt; &gt; &gt; &gt; sptComp</div><div class="ttdoc">Two-step mapping taking two static activities and returning a list of compatible pairs of locations...</div><div class="ttdef"><b>Definition:</b> <a href="PrecalculatedMapping_8h_source.html#l00090">PrecalculatedMapping.h:90</a></div></div>
<div class="ttc" id="NumericConstants_8h_html_a6d68bd0697184d300542836f151a6f17"><div class="ttname"><a href="NumericConstants_8h.html#a6d68bd0697184d300542836f151a6f17">CRITERION_RTOL</a></div><div class="ttdeci">constexpr double CRITERION_RTOL</div><div class="ttdoc">A maximal relative tolerance of the criterion error imposed by the piece-wise linearization of energy...</div><div class="ttdef"><b>Definition:</b> <a href="NumericConstants_8h_source.html#l00033">NumericConstants.h:33</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a54ce8fd29e2640234e7013a22a8cf6db"><div class="ttname"><a href="classParallelHeuristicSolver.html#a54ce8fd29e2640234e7013a22a8cf6db">ParallelHeuristicSolver::mStopCondition</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mStopCondition</div><div class="ttdoc">The control thread sets this flag to true to stop all the worker threads. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00195">ParallelHeuristicSolver.h:195</a></div></div>
<div class="ttc" id="classHeuristicAlgorithms_html_a533a4de85081bfc9bd1b545b5c228a71"><div class="ttname"><a href="classHeuristicAlgorithms.html#a533a4de85081bfc9bd1b545b5c228a71">HeuristicAlgorithms::heuristicPowerModeSelection</a></div><div class="ttdeci">double heuristicPowerModeSelection(const OptimalTiming &amp;ot, PartialSolution &amp;ps, TabuList &amp;tabuList, bool &amp;solutionChanged) const </div><div class="ttdoc">The sub-heuristic tries to switch from one power saving mode to another one for a location in order t...</div><div class="ttdef"><b>Definition:</b> <a href="HeuristicAlgorithms_8cpp_source.html#l00410">HeuristicAlgorithms.cpp:410</a></div></div>
<div class="ttc" id="classTabuList_html"><div class="ttname"><a href="classTabuList.html">TabuList</a></div><div class="ttdoc">A short-term memory, containing a list of forbidden moves, that mitigates the risk of cycling...</div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00254">DataStructures.h:254</a></div></div>
<div class="ttc" id="Utils_8h_html_a57f19363421d5a671e576986ece92b2a"><div class="ttname"><a href="Utils_8h.html#a57f19363421d5a671e576986ece92b2a">fileExists</a></div><div class="ttdeci">bool fileExists(const std::string &amp;pathToFile)</div><div class="ttdoc">It checks the existence of the file. </div><div class="ttdef"><b>Definition:</b> <a href="Utils_8cpp_source.html#l00085">Utils.cpp:85</a></div></div>
<div class="ttc" id="Utils_8h_html"><div class="ttname"><a href="Utils_8h.html">Utils.h</a></div><div class="ttdoc">Various auxiliary functions used across the program. </div></div>
<div class="ttc" id="namespaceSettings_html_a1095da8807365b55cb71a26e14f8eb08"><div class="ttname"><a href="namespaceSettings.html#a1095da8807365b55cb71a26e14f8eb08">Settings::VERBOSE</a></div><div class="ttdeci">bool VERBOSE</div><div class="ttdoc">Boolean flag determining verbosity of the program. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00028">Settings.cpp:28</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a9cb3b94c49a8927c1cf170ac96e78878"><div class="ttname"><a href="classKnowledgeBase.html#a9cb3b94c49a8927c1cf170ac96e78878">KnowledgeBase::infoLP</a></div><div class="ttdeci">std::pair&lt; uint64_t, double &gt; infoLP()</div><div class="ttdoc">Returns the total number of Linear Programming calls and its average runtime for one worker thread...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00117">KnowledgeBase.cpp:117</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a6ae1262a95d3b401426c718288555e7e"><div class="ttname"><a href="classKnowledgeBase.html#a6ae1262a95d3b401426c718288555e7e">KnowledgeBase::bestSolution</a></div><div class="ttdeci">Solution bestSolution()</div><div class="ttdoc">Returns the best found solution, throws an exception if not available. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00035">KnowledgeBase.cpp:35</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_aeb671477963887a89451c260ae4bfe2e"><div class="ttname"><a href="classKnowledgeBase.html#aeb671477963887a89451c260ae4bfe2e">KnowledgeBase::recordChangePathCall</a></div><div class="ttdeci">void recordChangePathCall()</div><div class="ttdoc">Reports that robot paths were diversified, i.e. ParallelHeuristicSolver::changeRobotPaths method was ...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00123">KnowledgeBase.h:123</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_ae4defe3fdd724b75ecf559ec4feef165"><div class="ttname"><a href="classParallelHeuristicSolver.html#ae4defe3fdd724b75ecf559ec4feef165">ParallelHeuristicSolver::mTabuListSize</a></div><div class="ttdeci">uint32_t mTabuListSize</div><div class="ttdoc">The number of tabu list elements calculated in the constructor. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00190">ParallelHeuristicSolver.h:190</a></div></div>
<div class="ttc" id="namespaceSettings_html_a624a1fe5cbbc224c2d828681b71a5104"><div class="ttname"><a href="namespaceSettings.html#a624a1fe5cbbc224c2d828681b71a5104">Settings::NUMBER_OF_THREADS</a></div><div class="ttdeci">uint32_t NUMBER_OF_THREADS</div><div class="ttdoc">Maximal number of threads to be used. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00030">Settings.cpp:30</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a02f45a19f59e451b6f1dfb21d339fea9"><div class="ttname"><a href="classParallelHeuristicSolver.html#a02f45a19f59e451b6f1dfb21d339fea9">ParallelHeuristicSolver::mLocs</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; Location * &gt; &gt; &gt; mLocs</div><div class="ttdoc">Preallocated 2-D array of locations for getShortestCircuit method, indexed by thread. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00211">ParallelHeuristicSolver.h:211</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a223ac73bb0f37ac4f4ffdfd095987e0f"><div class="ttname"><a href="classParallelHeuristicSolver.html#a223ac73bb0f37ac4f4ffdfd095987e0f">ParallelHeuristicSolver::mRuntime</a></div><div class="ttdeci">double mRuntime</div><div class="ttdoc">The runtime of this heuristic, updated from time to time. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00188">ParallelHeuristicSolver.h:188</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a56fcd3b824a872da01c6b92b93889ca5"><div class="ttname"><a href="classKnowledgeBase.html#a56fcd3b824a872da01c6b92b93889ca5">KnowledgeBase::addErrorMessage</a></div><div class="ttdeci">void addErrorMessage(const std::string &amp;msg)</div><div class="ttdoc">Add an error message to the mutex protected vector of messages. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00095">KnowledgeBase.cpp:95</a></div></div>
<div class="ttc" id="NumericConstants_8h_html_a3ebebeda85a70b80e3aaa937ed8fb7a3"><div class="ttname"><a href="NumericConstants_8h.html#a3ebebeda85a70b80e3aaa937ed8fb7a3">TIME_TOL</a></div><div class="ttdeci">constexpr double TIME_TOL</div><div class="ttdoc">A minimal time difference that is considered significant for a solution. </div><div class="ttdef"><b>Definition:</b> <a href="NumericConstants_8h_source.html#l00031">NumericConstants.h:31</a></div></div>
<div class="ttc" id="structOptimalTiming_html_a2c697a59113a6120436a02dda26af22a"><div class="ttname"><a href="structOptimalTiming.html#a2c697a59113a6120436a02dda26af22a">OptimalTiming::totalEnergy</a></div><div class="ttdeci">double totalEnergy</div><div class="ttdoc">Energy consumption of a robotic cell for this timing. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00150">DataStructures.h:150</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a2a7a50044de9484c54cbc91ed254e030"><div class="ttname"><a href="classKnowledgeBase.html#a2a7a50044de9484c54cbc91ed254e030">KnowledgeBase::pathChangeCalls</a></div><div class="ttdeci">uint64_t pathChangeCalls() const </div><div class="ttdoc">The total number of ParallelHeuristicSolver::changeRobotPaths calls. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00125">KnowledgeBase.h:125</a></div></div>
<div class="ttc" id="structCircuitTuple_html"><div class="ttname"><a href="structCircuitTuple.html">CircuitTuple</a></div><div class="ttdoc">A partially fixed problem, i.e. tuple. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00133">DataStructures.h:133</a></div></div>
<div class="ttc" id="classInvalidArgument_html"><div class="ttname"><a href="classInvalidArgument.html">InvalidArgument</a></div><div class="ttdoc">Exception is thrown if a method is given invalid parameters or a user provides invalid program argume...</div><div class="ttdef"><b>Definition:</b> <a href="Exceptions_8h_source.html#l00120">Exceptions.h:120</a></div></div>
<div class="ttc" id="classNoFeasibleSolutionExists_html"><div class="ttname"><a href="classNoFeasibleSolutionExists.html">NoFeasibleSolutionExists</a></div><div class="ttdoc">Thrown if no feasible solution is found by the heuristic. </div><div class="ttdef"><b>Definition:</b> <a href="Exceptions_8h_source.html#l00134">Exceptions.h:134</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_aad20eb616735ba3814a0efa76c837816"><div class="ttname"><a href="classParallelHeuristicSolver.html#aad20eb616735ba3814a0efa76c837816">ParallelHeuristicSolver::calculateNewCycleTime</a></div><div class="ttdeci">double calculateNewCycleTime(const uint32_t &amp;threadId, const double &amp;currentCycleTime, std::vector&lt; StaticActivity * &gt; &amp;alternative, std::vector&lt; Location * &gt; &amp;fixed, Location *toFix, PrecalculatedCircuits &amp;precalculatedCircuits)</div><div class="ttdoc">A highly optimized function calculates a lower estimation on the robot cycle time if toFix location i...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00700">ParallelHeuristicSolver.cpp:700</a></div></div>
<div class="ttc" id="structSolution_html_a21c7486cdfe34ac5f7769b3053f10a71"><div class="ttname"><a href="structSolution.html#a21c7486cdfe34ac5f7769b3053f10a71">Solution::status</a></div><div class="ttdeci">State status</div><div class="ttdoc">Enum specifying whether the solution is optimal, feasible, or infeasible... </div><div class="ttdef"><b>Definition:</b> <a href="Solution_8h_source.html#l00055">Solution.h:55</a></div></div>
<div class="ttc" id="classStaticActivity_html"><div class="ttname"><a href="classStaticActivity.html">StaticActivity</a></div><div class="ttdoc">Collection of locations in which a robot operation (or waiting) can be performed. ...</div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00304">RoboticLine.h:304</a></div></div>
<div class="ttc" id="namespacestd_1_1chrono_html"><div class="ttname"><a href="namespacestd_1_1chrono.html">chrono</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a3944e3973bc8a3adaf99509bc56bcb30"><div class="ttname"><a href="classParallelHeuristicSolver.html#a3944e3973bc8a3adaf99509bc56bcb30">ParallelHeuristicSolver::mDist</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; double &gt; &gt; &gt; mDist</div><div class="ttdoc">Preallocated 2-D array of distances for getShortestCircuit method, indexed by thread. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00207">ParallelHeuristicSolver.h:207</a></div></div>
<div class="ttc" id="structPartialSolution_html"><div class="ttname"><a href="structPartialSolution.html">PartialSolution</a></div><div class="ttdoc">Fixed locations, power saving modes, and movements. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLineSolverLP_8h_source.html#l00043">RoboticLineSolverLP.h:43</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_ac18f9b3516750006bda87b0a52bb7ed4"><div class="ttname"><a href="classKnowledgeBase.html#ac18f9b3516750006bda87b0a52bb7ed4">KnowledgeBase::recordLocHeurRelErr</a></div><div class="ttdeci">void recordLocHeurRelErr(double relativeEstError)</div><div class="ttdoc">Reports a relative estimation error of the change locations sub-heuristic for an energy improvement...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00149">KnowledgeBase.cpp:149</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a1e5b5c5cecd3731a7771c83a31eb4d09"><div class="ttname"><a href="classKnowledgeBase.html#a1e5b5c5cecd3731a7771c83a31eb4d09">KnowledgeBase::recordNumberOfItersPerTuple</a></div><div class="ttdeci">void recordNumberOfItersPerTuple(uint64_t iters)</div><div class="ttdoc">Reports the number of optimization iterations performed for a loaded tuple. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00181">KnowledgeBase.cpp:181</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a8a03d5b53452d8439c67daeb31e05fb1"><div class="ttname"><a href="classParallelHeuristicSolver.html#a8a03d5b53452d8439c67daeb31e05fb1">ParallelHeuristicSolver::constructMinimalDurationGraph</a></div><div class="ttdeci">Graph constructMinimalDurationGraph(Robot *r) const </div><div class="ttdoc">Generates a distance graph for the given robot. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00267">ParallelHeuristicSolver.cpp:267</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a6089f6ae29acb565dbff981ebbaaa483"><div class="ttname"><a href="classParallelHeuristicSolver.html#a6089f6ae29acb565dbff981ebbaaa483">ParallelHeuristicSolver::createInitialDistanceMatrix</a></div><div class="ttdeci">DistanceMatrix&lt; double &gt; createInitialDistanceMatrix(const Graph &amp;g) const </div><div class="ttdoc">It creates an initial matrix of distances based on edge lengths. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00316">ParallelHeuristicSolver.cpp:316</a></div></div>
<div class="ttc" id="classMovingAverage_html_af2a862523aa8e9d902186fc9cc72a2cc"><div class="ttname"><a href="classMovingAverage.html#af2a862523aa8e9d902186fc9cc72a2cc">MovingAverage::addValue</a></div><div class="ttdeci">void addValue(const T &amp;val)</div><div class="ttdoc">Add a new value to the moving average. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00359">DataStructures.h:359</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a0e945a82cfc3e39273324d68b7547c94"><div class="ttname"><a href="classKnowledgeBase.html#a0e945a82cfc3e39273324d68b7547c94">KnowledgeBase::infoItersPerTuple</a></div><div class="ttdeci">std::pair&lt; uint64_t, double &gt; infoItersPerTuple()</div><div class="ttdoc">Returns the total number of tuples used for optimization and the average number of optimization itera...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00186">KnowledgeBase.cpp:186</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a991db5017e69d25756871b761d20c7a1"><div class="ttname"><a href="classKnowledgeBase.html#a991db5017e69d25756871b761d20c7a1">KnowledgeBase::recordPwrmHeurRelErr</a></div><div class="ttdeci">void recordPwrmHeurRelErr(double relativeEstError)</div><div class="ttdoc">Reports a relative estimation error of the (de)select power mode sub-heuristic for an energy improvem...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00165">KnowledgeBase.cpp:165</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_aa2c96c424007ef58dda3156f1336b1d6"><div class="ttname"><a href="classParallelHeuristicSolver.html#aa2c96c424007ef58dda3156f1336b1d6">ParallelHeuristicSolver::mKB</a></div><div class="ttdeci">KnowledgeBase mKB</div><div class="ttdoc">Various data of the heuristic, e.g. generated tuples, performance statistics, etc. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00200">ParallelHeuristicSolver.h:200</a></div></div>
<div class="ttc" id="ParallelHeuristicSolver_8h_html"><div class="ttname"><a href="ParallelHeuristicSolver_8h.html">ParallelHeuristicSolver.h</a></div><div class="ttdoc">A parallel hybrid heuristic solving the energy optimization problem of robotic cells. </div></div>
<div class="ttc" id="classKnowledgeBase_html_a752080b279d47c9a4ff095ae9e594009"><div class="ttname"><a href="classKnowledgeBase.html#a752080b279d47c9a4ff095ae9e594009">KnowledgeBase::averageErrOfLocHeur</a></div><div class="ttdeci">double averageErrOfLocHeur()</div><div class="ttdoc">Returns an average estimation error of the change locations sub-heuristic. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00153">KnowledgeBase.cpp:153</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_ab247b5c61bc4d777d5d1ce87718f50ed"><div class="ttname"><a href="classParallelHeuristicSolver.html#ab247b5c61bc4d777d5d1ce87718f50ed">ParallelHeuristicSolver::generatePromisingTuples</a></div><div class="ttdeci">void generatePromisingTuples(const uint32_t &amp;threadId)</div><div class="ttdoc">It generates promising tuples and adds them to the KnowledgeBase. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00873">ParallelHeuristicSolver.cpp:873</a></div></div>
<div class="ttc" id="Algorithms_8h_html_a25b1baf9140955bb9b9da3820519d14b"><div class="ttname"><a href="Algorithms_8h.html#a25b1baf9140955bb9b9da3820519d14b">floyd</a></div><div class="ttdeci">DistanceMatrix&lt; T &gt; floyd(DistanceMatrix&lt; T &gt; m, const C &amp;cmp=std::greater&lt; T &gt;())</div><div class="ttdoc">It calculates all-to-all shortest paths and returns the matrix with their lengths. </div><div class="ttdef"><b>Definition:</b> <a href="Algorithms_8h_source.html#l00050">Algorithms.h:50</a></div></div>
<div class="ttc" id="structHamiltonianCircuit_html_a4dd954610cc080dabc71891c761d2fa6"><div class="ttname"><a href="structHamiltonianCircuit.html#a4dd954610cc080dabc71891c761d2fa6">HamiltonianCircuit::minLength</a></div><div class="ttdeci">double minLength</div><div class="ttdoc">The lower bound on the robot cycle time for this circuit (neglecting global constraints). </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00087">DataStructures.h:87</a></div></div>
<div class="ttc" id="structGraph_html"><div class="ttname"><a href="structGraph.html">Graph</a></div><div class="ttdoc">A graph in which random alternatives will be searched for. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00065">DataStructures.h:65</a></div></div>
<div class="ttc" id="classHeuristicAlgorithms_html_a8ff0d590aa5f78e010fbfee385275e78"><div class="ttname"><a href="classHeuristicAlgorithms.html#a8ff0d590aa5f78e010fbfee385275e78">HeuristicAlgorithms::heuristicLocationChanges</a></div><div class="ttdeci">double heuristicLocationChanges(OptimalTiming &amp;ot, PartialSolution &amp;ps, const std::vector&lt; std::vector&lt; Location * &gt;&gt; &amp;fixed, bool &amp;solutionChanged) const </div><div class="ttdoc">The sub-heuristic locally optimizes the robot paths (change locations) to reduce energy consumption...</div><div class="ttdef"><b>Definition:</b> <a href="HeuristicAlgorithms_8cpp_source.html#l00305">HeuristicAlgorithms.cpp:305</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a1aaf7fe1cdd30632776c1e797fbffc85"><div class="ttname"><a href="classKnowledgeBase.html#a1aaf7fe1cdd30632776c1e797fbffc85">KnowledgeBase::averageNumberOfLPCallsForLPFix</a></div><div class="ttdeci">double averageNumberOfLPCallsForLPFix()</div><div class="ttdoc">Returns an average number of added precedences required for collisions avoidance. ...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00129">KnowledgeBase.cpp:129</a></div></div>
<div class="ttc" id="DataStructures_8h_html_a37b7af86392f48cd5663232e21b14b09"><div class="ttname"><a href="DataStructures_8h.html#a37b7af86392f48cd5663232e21b14b09">Algo</a></div><div class="ttdeci">Algo</div><div class="ttdoc">Defining constants for different states of the heuristic. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00036">DataStructures.h:36</a></div></div>
<div class="ttc" id="structGraph_html_a6751fc8b27562b933f059c518a5cb2ac"><div class="ttname"><a href="structGraph.html#a6751fc8b27562b933f059c518a5cb2ac">Graph::idToSuccessors</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Edge &gt; &gt; idToSuccessors</div><div class="ttdoc">Node index to leaving edges that enters to its (node) successors. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00075">DataStructures.h:75</a></div></div>
<div class="ttc" id="namespaceSettings_html_a46a8fc3b810575540b7000e8418791b7"><div class="ttname"><a href="namespaceSettings.html#a46a8fc3b810575540b7000e8418791b7">Settings::RESULTS_DIRECTORY</a></div><div class="ttdeci">string RESULTS_DIRECTORY</div><div class="ttdoc">If not empty, then the optimization results will be written to this directory. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00034">Settings.cpp:34</a></div></div>
<div class="ttc" id="namespaceSettings_html_a528aca0aec3236176299d861eab1ccaa"><div class="ttname"><a href="namespaceSettings.html#a528aca0aec3236176299d861eab1ccaa">Settings::MIN_ITERS_PER_TUPLE</a></div><div class="ttdeci">uint32_t MIN_ITERS_PER_TUPLE</div><div class="ttdoc">The minimal number of optimization iterations per each tuple. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00044">Settings.cpp:44</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_aa41d69fcbb34acbfd3f6ac9dabaa695d"><div class="ttname"><a href="classKnowledgeBase.html#aa41d69fcbb34acbfd3f6ac9dabaa695d">KnowledgeBase::infoPwrmHeur</a></div><div class="ttdeci">std::pair&lt; uint64_t, double &gt; infoPwrmHeur()</div><div class="ttdoc">Returns the total number of HeuristicAlgorithms::heuristicPowerModeSelection calls and average runtim...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00161">KnowledgeBase.cpp:161</a></div></div>
<div class="ttc" id="structGraph_html_a3cd4b67afadf044092996b917d3d8043"><div class="ttname"><a href="structGraph.html#a3cd4b67afadf044092996b917d3d8043">Graph::endIdent</a></div><div class="ttdeci">uint32_t endIdent</div><div class="ttdoc">An index of the end node. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00071">DataStructures.h:71</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a718e534c49e653598892a55e53d9d91e"><div class="ttname"><a href="classParallelHeuristicSolver.html#a718e534c49e653598892a55e53d9d91e">ParallelHeuristicSolver::writePerformanceRecordToLogFile</a></div><div class="ttdeci">void writePerformanceRecordToLogFile(const double &amp;initializationTime, const double &amp;finalRuntime)</div><div class="ttdoc">It writes various statistics about the heuristic performance to a CSV file. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00970">ParallelHeuristicSolver.cpp:970</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a582439557d6cd10491cc3de385acaf0a"><div class="ttname"><a href="classKnowledgeBase.html#a582439557d6cd10491cc3de385acaf0a">KnowledgeBase::averageErrOfPwrmHeur</a></div><div class="ttdeci">double averageErrOfPwrmHeur()</div><div class="ttdoc">Returns an average estimation error of the (de)select power mode sub-heuristic. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00169">KnowledgeBase.cpp:169</a></div></div>
<div class="ttc" id="structCircuitRecord_html_a6d4b145cca40b97ba37bfaf81d549c4e"><div class="ttname"><a href="structCircuitRecord.html#a6d4b145cca40b97ba37bfaf81d549c4e">CircuitRecord::hc</a></div><div class="ttdeci">HamiltonianCircuit&lt; Location &gt; hc</div><div class="ttdoc">Shortest closed path through locations, fixed locations are included. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00123">DataStructures.h:123</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_aacfa1002d9ac0e9fbbc78a0e11b10bc1"><div class="ttname"><a href="classParallelHeuristicSolver.html#aacfa1002d9ac0e9fbbc78a0e11b10bc1">ParallelHeuristicSolver::getShortestCircuit</a></div><div class="ttdeci">HamiltonianCircuit&lt; Location &gt; getShortestCircuit(const uint32_t &amp;threadId, const std::vector&lt; StaticActivity * &gt; &amp;circuit, const std::vector&lt; Location * &gt; &amp;fixed, bool writeCircuit=true)</div><div class="ttdoc">It calculates the shortest circuit through locations that visits each static activity in the same ord...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00434">ParallelHeuristicSolver.cpp:434</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_aa19f3ce573a7ed7b53d2d5f443493e74"><div class="ttname"><a href="classParallelHeuristicSolver.html#aa19f3ce573a7ed7b53d2d5f443493e74">ParallelHeuristicSolver::mPreds</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; std::vector&lt; int64_t &gt; &gt; &gt; mPreds</div><div class="ttdoc">Preallocated 2-D array of predecessors for getShortestCircuit method, indexed by thread. </div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00209">ParallelHeuristicSolver.h:209</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_a377a1376f55138ee5f1aa4f1c4200991"><div class="ttname"><a href="classParallelHeuristicSolver.html#a377a1376f55138ee5f1aa4f1c4200991">ParallelHeuristicSolver::printProgressInfo</a></div><div class="ttdeci">void printProgressInfo(const double &amp;currentRuntime)</div><div class="ttdoc">Prints various information about the performance of the sub-heuristics, generation of tuples...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8cpp_source.html#l00941">ParallelHeuristicSolver.cpp:941</a></div></div>
<div class="ttc" id="structGraph_html_a2bafb08a3455904d2ae66dee4fe01931"><div class="ttname"><a href="structGraph.html#a2bafb08a3455904d2ae66dee4fe01931">Graph::startIdent</a></div><div class="ttdeci">uint32_t startIdent</div><div class="ttdoc">An index of the start node. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00069">DataStructures.h:69</a></div></div>
<div class="ttc" id="NumericConstants_8h_html"><div class="ttname"><a href="NumericConstants_8h.html">NumericConstants.h</a></div><div class="ttdoc">The file defines allowed inaccuracies in a solution and constants for floats. </div></div>
<div class="ttc" id="Algorithms_8h_html_adefb1b4662303d856922650a8bca040a"><div class="ttname"><a href="Algorithms_8h.html#adefb1b4662303d856922650a8bca040a">DistanceMatrix</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; T &gt;&gt; DistanceMatrix</div><div class="ttdoc">Definition of the matrix data type. </div><div class="ttdef"><b>Definition:</b> <a href="Algorithms_8h_source.html#l00039">Algorithms.h:39</a></div></div>
<div class="ttc" id="structEdge_html_aca4e5b9eb1b0c9a0c2feafd760a0a3fe"><div class="ttname"><a href="structEdge.html#aca4e5b9eb1b0c9a0c2feafd760a0a3fe">Edge::j</a></div><div class="ttdeci">uint32_t j</div><div class="ttdoc">An index assigned to the activity t, used for an access to the distance matrix. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00054">DataStructures.h:54</a></div></div>
<div class="ttc" id="classLocation_html"><div class="ttname"><a href="classLocation.html">Location</a></div><div class="ttdoc">Location of the robot used either during work (welding) or waiting. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00192">RoboticLine.h:192</a></div></div>
<div class="ttc" id="classRoboticLine_html"><div class="ttname"><a href="classRoboticLine.html">RoboticLine</a></div><div class="ttdoc">The robotic cell corresponds to an instance of this class. </div><div class="ttdef"><b>Definition:</b> <a href="RoboticLine_8h_source.html#l00563">RoboticLine.h:563</a></div></div>
<div class="ttc" id="structPrecalculatedMapping_html"><div class="ttname"><a href="structPrecalculatedMapping.html">PrecalculatedMapping</a></div><div class="ttdoc">The structure contains the maps for fast searching in the robotic cell. </div><div class="ttdef"><b>Definition:</b> <a href="PrecalculatedMapping_8h_source.html#l00076">PrecalculatedMapping.h:76</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a6dd80e9362c284d03ba93bf3362375d4"><div class="ttname"><a href="classKnowledgeBase.html#a6dd80e9362c284d03ba93bf3362375d4">KnowledgeBase::averageLPFixDeterioration</a></div><div class="ttdeci">double averageLPFixDeterioration()</div><div class="ttdoc">Returns an average quality deterioration caused by the collisions resolution. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00125">KnowledgeBase.cpp:125</a></div></div>
<div class="ttc" id="structEdge_html_ae3ea80ea41b7a8072d456af9110dc6d5"><div class="ttname"><a href="structEdge.html#ae3ea80ea41b7a8072d456af9110dc6d5">Edge::length</a></div><div class="ttdeci">double length</div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00059">DataStructures.h:59</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a93a30b5b236d60758752d82d444f75b3"><div class="ttname"><a href="classKnowledgeBase.html#a93a30b5b236d60758752d82d444f75b3">KnowledgeBase::infoTuplesGeneration</a></div><div class="ttdeci">std::pair&lt; uint64_t, double &gt; infoTuplesGeneration()</div><div class="ttdoc">Returns the total number of generated tuples and the average generation time for one worker thread...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00177">KnowledgeBase.cpp:177</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_af22e21676df12dfdd0d74aac54e79115"><div class="ttname"><a href="classKnowledgeBase.html#af22e21676df12dfdd0d74aac54e79115">KnowledgeBase::numberOfPwrmHeurBreaks</a></div><div class="ttdeci">uint64_t numberOfPwrmHeurBreaks() const </div><div class="ttdoc">Returns how many times the (de)select power mode sub-heuristic caused infeasibility. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00081">KnowledgeBase.h:81</a></div></div>
<div class="ttc" id="structShortestCircuit_html_ae3e25f8201c95d797cbd66eaa83244ca"><div class="ttname"><a href="structShortestCircuit.html#ae3e25f8201c95d797cbd66eaa83244ca">ShortestCircuit::circuit</a></div><div class="ttdeci">std::vector&lt; StaticActivity * &gt; circuit</div><div class="ttdoc">Selected alternative, i.e. order of operations. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00104">DataStructures.h:104</a></div></div>
<div class="ttc" id="namespaceSettings_html_a4cf0b535974659ddf33fa667da82f320"><div class="ttname"><a href="namespaceSettings.html#a4cf0b535974659ddf33fa667da82f320">Settings::MAX_RUNTIME</a></div><div class="ttdeci">double MAX_RUNTIME</div><div class="ttdoc">Maximal run time of the solver. </div><div class="ttdef"><b>Definition:</b> <a href="Settings_8cpp_source.html#l00031">Settings.cpp:31</a></div></div>
<div class="ttc" id="structPrecalculatedMapping_html_afaaf2a6db781d7e190e5da26a6fb2f20"><div class="ttname"><a href="structPrecalculatedMapping.html#afaaf2a6db781d7e190e5da26a6fb2f20">PrecalculatedMapping::locationsToMovement</a></div><div class="ttdeci">std::unordered_map&lt; std::pair&lt; Location *, Location * &gt;, Movement * &gt; locationsToMovement</div><div class="ttdoc">It finds the movement between two locations if exists. </div><div class="ttdef"><b>Definition:</b> <a href="PrecalculatedMapping_8h_source.html#l00084">PrecalculatedMapping.h:84</a></div></div>
<div class="ttc" id="classHeuristicAlgorithms_html_abd5588eab6e5aaf559d00d8421a51009"><div class="ttname"><a href="classHeuristicAlgorithms.html#abd5588eab6e5aaf559d00d8421a51009">HeuristicAlgorithms::solvePartialProblem</a></div><div class="ttdeci">OptimalTiming solvePartialProblem(const PartialSolution &amp;ps, const CircuitTuple &amp;t, Algo algo)</div><div class="ttdoc">Employs Linear Programming to obtain energy-efficient timing for a given tuple. </div><div class="ttdef"><b>Definition:</b> <a href="HeuristicAlgorithms_8cpp_source.html#l00138">HeuristicAlgorithms.cpp:138</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a3540b21b027eabf9fc6ed1cfbf839251"><div class="ttname"><a href="classKnowledgeBase.html#a3540b21b027eabf9fc6ed1cfbf839251">KnowledgeBase::recordAddTuplesCall</a></div><div class="ttdeci">void recordAddTuplesCall(double runtime)</div><div class="ttdoc">Reports a real time (measured by a timer) required for ParallelHeuristicSolver::addRandomTuplesToKB c...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00173">KnowledgeBase.cpp:173</a></div></div>
<div class="ttc" id="structShortestCircuit_html_ac483549292f3f6c198503c0b7a16cbe8"><div class="ttname"><a href="structShortestCircuit.html#ac483549292f3f6c198503c0b7a16cbe8">ShortestCircuit::fixedLocations</a></div><div class="ttdeci">std::vector&lt; Location * &gt; fixedLocations</div><div class="ttdoc">Locations required to be fixed to enforce the spatial compatibility between robots. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00106">DataStructures.h:106</a></div></div>
<div class="ttc" id="classMovingAverage_html"><div class="ttname"><a href="classMovingAverage.html">MovingAverage</a></div><div class="ttdoc">The class encapsulating the calculation of the moving average. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00340">DataStructures.h:340</a></div></div>
<div class="ttc" id="structOptimalTiming_html"><div class="ttname"><a href="structOptimalTiming.html">OptimalTiming</a></div><div class="ttdoc">Obtained timing for a partial problem. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00148">DataStructures.h:148</a></div></div>
<div class="ttc" id="classParallelHeuristicSolver_html_ae7760850db4471b60ae8c00dc1299ce6"><div class="ttname"><a href="classParallelHeuristicSolver.html#ae7760850db4471b60ae8c00dc1299ce6">ParallelHeuristicSolver::algo</a></div><div class="ttdeci">HeuristicAlgorithms algo</div><div class="ttdoc">Optimization sub-heuristics and the related Linear Programming solver for partially fixed problems...</div><div class="ttdef"><b>Definition:</b> <a href="ParallelHeuristicSolver_8h_source.html#l00204">ParallelHeuristicSolver.h:204</a></div></div>
<div class="ttc" id="structEdge_html_a0ad7bbadf63ad9a748c35b6034c5b916"><div class="ttname"><a href="structEdge.html#a0ad7bbadf63ad9a748c35b6034c5b916">Edge::i</a></div><div class="ttdeci">uint32_t i</div><div class="ttdoc">An index assigned to the activity f, used for an access to the distance matrix. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00052">DataStructures.h:52</a></div></div>
<div class="ttc" id="classMovingAverage_html_ab939f36282ecc64017eaccf19a01f7b0"><div class="ttname"><a href="classMovingAverage.html#ab939f36282ecc64017eaccf19a01f7b0">MovingAverage::average</a></div><div class="ttdeci">double average() const </div><div class="ttdoc">Current value of the running average. </div><div class="ttdef"><b>Definition:</b> <a href="DataStructures_8h_source.html#l00352">DataStructures.h:352</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a3447d2895233dbdd3fce200c9e576ae5"><div class="ttname"><a href="classKnowledgeBase.html#a3447d2895233dbdd3fce200c9e576ae5">KnowledgeBase::infeasibilityRate</a></div><div class="ttdeci">double infeasibilityRate()</div><div class="ttdoc">Infeasibility rate of Linear Programming, i.e. the proportion of infeasible solutions to feasible and...</div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8cpp_source.html#l00105">KnowledgeBase.cpp:105</a></div></div>
<div class="ttc" id="classEmptySolutionPool_html"><div class="ttname"><a href="classEmptySolutionPool.html">EmptySolutionPool</a></div><div class="ttdoc">Thrown if the best solution of the heuristic cannot be returned since the solution pool is empty...</div><div class="ttdef"><b>Definition:</b> <a href="Exceptions_8h_source.html#l00141">Exceptions.h:141</a></div></div>
<div class="ttc" id="PrecalculatedMapping_8h_html_aa148843f696e26adf64646f3db4ae3fe"><div class="ttname"><a href="PrecalculatedMapping_8h.html#aa148843f696e26adf64646f3db4ae3fe">SpatialCmpTuple</a></div><div class="ttdeci">std::tuple&lt; uint32_t, uint32_t, StaticActivity *, StaticActivity *, std::vector&lt; std::pair&lt; Location *, Location * &gt;&gt;&gt; SpatialCmpTuple</div><div class="ttdoc">Defines the data type for an element of the spatial compatibility, i.e. (rob1 idx, rob2 idx, act1, act2, {{loc1, loc2}*}). </div><div class="ttdef"><b>Definition:</b> <a href="PrecalculatedMapping_8h_source.html#l00068">PrecalculatedMapping.h:68</a></div></div>
<div class="ttc" id="classKnowledgeBase_html_a4eab5573c3a034d6e7223b79fc253c27"><div class="ttname"><a href="classKnowledgeBase.html#a4eab5573c3a034d6e7223b79fc253c27">KnowledgeBase::errorMessages</a></div><div class="ttdeci">std::vector&lt; std::string &gt; errorMessages() const </div><div class="ttdoc">Returns all the error messages that occurred in the threads of the heuristic. </div><div class="ttdef"><b>Definition:</b> <a href="KnowledgeBase_8h_source.html#l00066">KnowledgeBase.h:66</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 7 2015 15:20:40 for solver by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
